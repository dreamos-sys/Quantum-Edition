<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#064e3b">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Amiri&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <title>Quantum v4.2 - Mandelay Edition</title>
    <style>
        :root { --p: #10b981; --s: #3b82f6; --bg: #0f172a; --c: #1e293b; --gold: #fbbf24; }
        * { margin:0; padding:0; box-sizing:border-box; font-family: 'Poppins', sans-serif; }
        body { background: var(--bg); color: #f8fafc; overflow-x: hidden; padding-bottom: 80px; }
        .hidden { display: none !important; }

        /* Header & Spiritual Touch */
        .iso-header {
            background: linear-gradient(135deg, #064e3b, #022c22);
            padding: 25px 15px; text-align: center; border-bottom: 3px solid var(--gold);
        }
        .bismillah { font-family: 'Amiri', serif; font-size: 2rem; color: var(--gold); cursor: pointer; user-select: none; }

        /* Dashboard Info */
        .container { padding: 15px; }
        .sys-card { 
            background: var(--c); border-radius: 12px; padding: 15px; 
            margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.05);
            display: flex; justify-content: space-between; align-items: center;
        }

        /* 3-Column Grid ala DFLASH */
        .menu-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .menu-item { 
            background: var(--c); padding: 15px 5px; border-radius: 12px; text-align: center;
            border: 1px solid rgba(255,255,255,0.08); transition: 0.2s;
        }
        .menu-item i { font-size: 1.5rem; color: var(--p); margin-bottom: 8px; display: block; }
        .menu-item span { font-size: 0.65rem; font-weight: 600; color: #94a3b8; text-transform: uppercase; }
        .menu-item:active { transform: scale(0.95); background: #2d3748; }

        /* Smart Universal Scanner UI */
        #scanner-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9);
            z-index: 10000; display: none; flex-direction: column; align-items: center; justify-content: center;
        }
        .scan-window { width: 250px; height: 250px; border: 2px solid var(--p); border-radius: 20px; position: relative; }
        .scan-line { position: absolute; width: 100%; height: 2px; background: var(--p); animation: scan 2s infinite; }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

        /* Admin / Ghost Terminal */
        #ghost-terminal {
            position: fixed; inset: 0; background: #000; z-index: 9999; 
            padding: 20px; font-family: 'JetBrains Mono', monospace; display: none; flex-direction: column;
        }
        .term-out { flex: 1; color: #0f0; font-size: 0.7rem; overflow-y: auto; }
        .term-in { background: #111; border: 1px solid #0f0; color: #0f0; padding: 10px; outline: none; }

        /* Form Styling */
        .form-window { background: var(--c); border-radius: 15px; padding: 20px; border: 1px solid var(--p); }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; background: #0f172a; border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 8px; }
        .btn-p { width: 100%; padding: 15px; background: var(--p); border: none; border-radius: 8px; color: white; font-weight: 800; }
    </style>
</head>
<body>

    <div class="iso-header">
        <div class="bismillah" id="secret-trigger">بِسْمِ اللهِ الرَّحْمٰنِ الرَّحِيْمِ</div>
        <p style="font-size: 0.5rem; color: var(--gold); letter-spacing: 2px; margin-top: 5px;">SIF AL FIKRI • UNIVERSAL ENGINE</p>
    </div>

    <div class="container">
        <div class="sys-card">
            <div>
                <h3 id="clock" style="color: var(--p);">00:00</h3>
                <small id="date-display" style="font-size: 0.6rem; color: #94a3b8;">Senin, 06 Jan 2026</small>
            </div>
            <div style="font-size: 0.8rem; color: var(--gold);">
                <i class="fas fa-microchip"></i> QUANTUM v4.2
            </div>
        </div>

        <div id="main-view">
            <div class="menu-grid">
                <div class="menu-item" onclick="openForm('booking')">
                    <i class="fas fa-calendar-alt"></i><span>Booking</span>
                </div>
                <div class="menu-item" onclick="openForm('k3')">
                    <i class="fas fa-tools"></i><span>Lapor K3</span>
                </div>
                <div class="menu-item" onclick="openForm('security')">
                    <i class="fas fa-user-shield"></i><span>Security</span>
                </div>
                <div class="menu-item" onclick="activateSmartScanner()" style="border: 1px solid var(--p);">
                    <i class="fas fa-expand" style="color: var(--p);"></i><span>Smart Scan</span>
                </div>
                <div class="menu-item" onclick="alert('Module UMKM - Coming Soon')">
                    <i class="fas fa-store"></i><span>UMKM</span>
                </div>
                <div class="menu-item" onclick="location.reload()">
                    <i class="fas fa-sync-alt"></i><span>Refresh</span>
                </div>
            </div>

            <div id="admin-area" class="hidden">
                <h4 style="margin: 25px 0 10px; font-size: 0.7rem; color: var(--s); letter-spacing: 1px;">ADMIN PANEL (PAK ERWIN)</h4>
                <div class="menu-grid">
                    <div class="menu-item" onclick="alert('Laporan A4/Folio Ready')">
                        <i class="fas fa-print" style="color: var(--s);"></i><span>Laporan</span>
                    </div>
                    <div class="menu-item" onclick="alert('Sistem Inventaris ISO (Kosong)')">
                        <i class="fas fa-boxes" style="color: var(--gold);"></i><span>ISO Aset</span>
                    </div>
                    <div class="menu-item" onclick="open3TierGudang()">
                        <i class="fas fa-vault" style="color: #ef4444;"></i><span>Gudang</span>
                    </div>
                    <div class="menu-item" onclick="openQRTool()">
                        <i class="fas fa-qrcode" style="color: var(--p);"></i><span>QR Gen</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="form-view" class="hidden">
            <div class="form-window">
                <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                    <h3 id="form-title" style="font-size: 0.9rem;">FORM</h3>
                    <i class="fas fa-times-circle" style="color: #ef4444;" onclick="closeForm()"></i>
                </div>
                <div id="form-body"></div>
            </div>
        </div>
    </div>

    <div id="scanner-overlay">
        <div class="scan-window"><div class="scan-line"></div></div>
        <p style="margin-top: 20px; color: var(--p);">MENCARI KODE QR...</p>
        <button class="btn-p" style="width: auto; padding: 10px 30px; margin-top: 30px;" onclick="closeScanner()">BATAL</button>
    </div>

    <div id="ghost-terminal">
        <div class="term-out" id="term-out">> [SYSTEM] INITIALIZING MANDELAY KERNEL...</div>
        <input type="password" class="term-in" id="term-in" placeholder="Architect Key...">
    </div>

    <script>
        // 1. GHOST MODE & 3-TIER SECURITY
        let timer;
        const trigger = document.getElementById('secret-trigger');
        const terminal = document.getElementById('ghost-terminal');
        const termIn = document.getElementById('term-in');

        trigger.addEventListener('touchstart', () => { timer = setTimeout(() => { terminal.style.display = 'flex'; termIn.focus(); }, 3000); });
        trigger.addEventListener('touchend', () => { clearTimeout(timer); });

        termIn.addEventListener('keypress', (e) => {
            if(e.key === 'Enter') {
                if(termIn.value === '418626') {
                    terminal.style.display = 'none';
                    document.getElementById('admin-area').classList.remove('hidden');
                    alert("Welcome back, Architect Mr. M.");
                } else { terminal.style.display = 'none'; termIn.value = ''; }
            }
        });

        // 2. UNIVERSAL SMART SCANNER
        function activateSmartScanner() {
            document.getElementById('scanner-overlay').style.display = 'flex';
            setTimeout(() => {
                closeScanner();
                let mockResult = prompt("Universal Scan (Teks/Link/DREAM-ISO):");
                if(mockResult) {
                    if(mockResult.startsWith('http')) window.open(mockResult, '_blank');
                    else if(mockResult.includes('DREAM')) alert("Data ISO Terdeteksi: Membuka Aset...");
                    else alert("Hasil Scan: " + mockResult);
                }
            }, 2000);
        }
        function closeScanner() { document.getElementById('scanner-overlay').style.display = 'none'; }

        // 3. ADMIN QR TOOL (Terserah mau buat apa)
        function openQRTool() {
            openForm('qrgen');
            document.getElementById('form-title').innerText = "Custom QR Generator";
            document.getElementById('form-body').innerHTML = `
                <textarea id="qr-data" placeholder="Masukkan link atau teks bebas..."></textarea>
                <button class="btn-p" onclick="generateNow()">GENERATE QR</button>
                <div id="qr-res" style="text-align:center; margin-top:15px;"></div>
            `;
        }
        function generateNow() {
            const d = document.getElementById('qr-data').value;
            const url = `https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(d)}&size=200x200`;
            document.getElementById('qr-res').innerHTML = `<img src="${url}" style="border:5px solid white; border-radius:10px;">`;
        }

        // 4. UI UTILS
        function openForm(type) {
            document.getElementById('main-view').classList.add('hidden');
            document.getElementById('form-view').classList.remove('hidden');
        }
        function closeForm() {
            document.getElementById('main-view').classList.remove('hidden');
            document.getElementById('form-view').classList.add('hidden');
        }
        setInterval(() => {
            const n = new Date();
            document.getElementById('clock').innerText = n.getHours().toString().padStart(2,'0') + ":" + n.getMinutes().toString().padStart(2,'0');
        }, 1000);
    </script>
</body>
</html>
