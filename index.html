<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DREAM OS QUANTUM - SIF AL FIKRI</title>
    <link rel="manifest" href="./manifest.json">
    <style>
        :root {
            --primary: #1e3a8a;
            --secondary: #0c4a6e;
            --success: #166534;
            --warning: #b91c1c;
            --card-bg: #0f172a;
            --text: #f1f5f9;
            --gold: #fbbf24;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: #020617;
            color: var(--text);
            padding: 10px;
            padding-bottom: 70px;
            min-height: 100vh;
        }
        .header {
            text-align: center;
            padding: 15px 0;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--gold);
        }
        .logo-text {
            font-weight: bold;
            font-size: 1.8rem;
            color: var(--gold);
            text-shadow: 0 0 5px rgba(251, 191, 36, 0.5);
        }
        .cards-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 0 5px;
        }
        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            border: 1px solid rgba(251, 191, 36, 0.2);
            height: 160px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .card:active {
            transform: scale(0.95);
        }
        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .card-title {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--gold);
        }
        .card-subtitle {
            font-size: 0.85rem;
            color: #94a3b8;
            margin-top: 5px;
        }
        .card.user { background: linear-gradient(135deg, #1e3a8a, #0f172a); }
        .card.admin { background: linear-gradient(135deg, #0c4a6e, #0f172a); }
        .card.calendar { background: linear-gradient(135deg, #166534, #0f172a); }
        .card.hidden { background: linear-gradient(135deg, #b91c1c, #0f172a); display: none; }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #020617;
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }
        .form-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--gold);
        }
        input, select, textarea {
            width: 100%;
            padding: 14px;
            margin: 12px 0;
            background: rgba(255,255,255,0.08);
            border: 1px solid #334155;
            border-radius: 10px;
            color: white;
            font-size: 1rem;
        }
        .btn-send {
            background: #10b981;
            color: black;
            font-weight: bold;
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            margin-top: 15px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .btn-send:active {
            transform: scale(0.98);
        }
        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #0f172a;
            padding: 12px 15px;
            border-top: 1px solid #1e293b;
            font-size: 0.9rem;
            text-align: center;
            z-index: 1000;
        }
        .facility-list {
            max-height: 200px;
            overflow-y: auto;
            padding-right: 10px;
        }
        .facility-item {
            background: rgba(30, 41, 59, 0.5);
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 3px solid var(--gold);
        }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        @media (max-width: 480px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            .cards-container {
                grid-template-columns: 1fr;
            }
            .card {
                height: 140px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-text">DREAM OS QUANTUM v6.3.2</div>
        <div style="color: var(--gold); font-size: 0.9rem; margin-top: 5px;">SIF AL FIKRI ENTERPRISE SYSTEM</div>
    </div>

    <div class="cards-container">
        <div class="card user" onclick="openForm('userLayer')">
            <div class="card-icon">üè¢</div>
            <div class="card-title">USER PANEL</div>
            <div class="card-subtitle">Booking ‚Ä¢ K3 ‚Ä¢ Security</div>
        </div>
        <div class="card admin" onclick="openForm('adminLayer')">
            <div class="card-icon">üëë</div>
            <div class="card-title">ADMIN PANEL</div>
            <div class="card-subtitle">Monitoring ‚Ä¢ Inventory ‚Ä¢ Gudang</div>
        </div>
        <div class="card calendar" onclick="alert('üìÖ CALENDAR FULL OPERATION MODE\n- Anti Double Booking\n- Export PDF\n- Smart Reminder\n\nFitur ini aktif di system production. Demo mode menampilkan UI preview.')">
            <div class="card-icon">üìÖ</div>
            <div class="card-title">SMART CALENDAR</div>
            <div class="card-subtitle">Anti Double Booking</div>
        </div>
        <div class="card hidden" id="architectCard">
            <div class="card-icon">‚öôÔ∏è</div>
            <div class="card-title">ARCHITECT MODE</div>
            <div class="card-subtitle">System Control</div>
        </div>
    </div>

    <div id="userLayer" class="overlay">
        <div class="form-header">
            <h3 style="color: var(--gold);">USER PANEL - FULL OPERATION</h3>
            <button onclick="closeForm('userLayer')" style="background: none; color: white; border: none; font-size: 1.8rem; font-weight: bold;">√ó</button>
        </div>

        <div style="background: rgba(30, 41, 59, 0.5); padding: 15px; border-radius: 10px; margin-bottom: 25px; border: 1px solid var(--gold);">
            <div style="color: var(--gold); font-weight: bold; margin-bottom: 8px;">‚öôÔ∏è SYSTEM STATUS</div>
            <div style="font-size: 0.9rem; color: #94a3b8; line-height: 1.5;">
                ‚Ä¢ ‚úÖ Connected to SIF Al Fikri Server<br>
                ‚Ä¢ ‚úÖ Database Live<br>
                ‚Ä¢ ‚úÖ WhatsApp Integration: Active<br>
                ‚Ä¢ ‚úÖ Offline Mode: Ready
            </div>
        </div>

        <!-- BOOKING FORM DENGAN DATA LENGKAP -->
        <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 25px; border-left: 3px solid #10b981;">
            <h4 style="color: #10b981; margin-bottom: 10px;">üìÖ FORM BOOKING SARANA</h4>
            
            <div class="form-grid">
                <div>
                    <select id="divisi" style="background: rgba(0,0,0,0.3);">
                        <option value="">Pilih Divisi (Wajib)</option>
                        <option value="SD">SD Islam Al Fikri</option>
                        <option value="SMP">SMP Islam Al Fikri</option>
                        <option value="SMA">SMA Islam Al Fikri</option>
                        <option value="UMUM">Umum/Yayasan</option>
                    </select>
                </div>
                <div>
                    <input type="text" id="pic" placeholder="Nama PIC (Wajib)" style="background: rgba(0,0,0,0.3);">
                </div>
            </div>
            
            <select id="sarana" style="background: rgba(0,0,0,0.3);">
                <option value="">Pilih Sarana (18 Pilihan)</option>
                <option value="Aula Lt.3">üèõÔ∏è Aula Lt.3 (Kapasitas: 300 orang)</option>
                <option value="Aula Lt.2">üèõÔ∏è Aula Lt.2 (Kapasitas: 200 orang)</option>
                <option value="Labkom SD">üíª Labkom SD (25 Unit PC)</option>
                <option value="Labkom SMP">üíª Labkom SMP (30 Unit PC)</option>
                <option value="Labkom SMA">üíª Labkom SMA (35 Unit PC)</option>
                <option value="Lapangan Bola">‚öΩ Lapangan Bola (Ukuran Full)</option>
                <option value="Lapangan Basket">üèÄ Lapangan Basket (Standard)</option>
                <option value="Lapangan Volley">üèê Lapangan Volley (Standard)</option>
                <option value="Masjid">üïå Masjid (Kapasitas: 500 jamaah)</option>
                <option value="Perpustakaan">üìö Perpustakaan (Kapasitas: 100 orang)</option>
                <option value="Saung Utama">üèïÔ∏è Saung Utama (Kapasitas: 150 orang)</option>
                <option value="Saung Kecil">üèïÔ∏è Saung Kecil (Kapasitas: 80 orang)</option>
                <option value="Kantin SMP">üçΩÔ∏è Kantin SMP</option>
                <option value="Kantin SMA">üçΩÔ∏è Kantin SMA</option>
                <option value="Ruang Meeting 1">üè† Ruang Meeting 1 (Kapasitas: 50 orang)</option>
                <option value="Ruang Meeting 2">üè† Ruang Meeting 2 (Kapasitas: 30 orang)</option>
                <option value="Ruang Kelas VIP">üè´ Kelas VIP (Full AC & Proyektor)</option>
                <option value="Studio Podcast">üé§ Studio Podcast (Soundproof)</option>
            </select>
            
            <div class="form-grid">
                <div>
                    <input type="date" id="tgl" style="background: rgba(0,0,0,0.3);">
                </div>
                <div>
                    <select id="jam" style="background: rgba(0,0,0,0.3);">
                        <option value="">Jam Operasional</option>
                        <option disabled>----------</option>
                        <option disabled>SENIN-KAMIS (07:30-16:00)</option>
                        <option>07:30 - 09:00</option>
                        <option>09:00 - 10:30</option>
                        <option>10:30 - 12:00</option>
                        <option>13:00 - 14:30</option>
                        <option>14:30 - 16:00</option>
                        <option disabled>----------</option>
                        <option disabled>JUMAT (10:30-13:00)</option>
                        <option>10:30 - 12:00</option>
                        <option>12:00 - 13:00</option>
                    </select>
                </div>
            </div>
            
            <textarea id="keperluan" placeholder="Keperluan Booking (Min. 20 karakter)" rows="3" style="background: rgba(0,0,0,0.3);"></textarea>
            
            <div style="background: rgba(239, 68, 68, 0.1); padding: 10px; border-radius: 8px; margin-top: 15px; border-left: 3px solid #ef4444;">
                <div style="color: #ef4444; font-weight: bold; font-size: 0.85rem;">
                    ‚ö†Ô∏è PERINGATAN: 
                    <span style="color: #fbbf24;">Pelanggaran aturan booking akan dikenakan sanksi sesuai SOP SIF Al Fikri No. 003/2025</span>
                </div>
            </div>
        </div>

        <!-- K3 REPORT DENGAN DATA LENGKAP -->
        <div style="background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 3px solid #ef4444;">
            <h4 style="color: #ef4444; margin-bottom: 10px;">üõ°Ô∏è LAPORAN K3 (KESELAMATAN & KESEHATAN KERJA)</h4>
            
            <div class="form-grid">
                <div>
                    <input type="text" id="namaPelapor" placeholder="Nama Pelapor (Wajib)" style="background: rgba(0,0,0,0.3);">
                </div>
                <div>
                    <select id="divisiK3" style="background: rgba(0,0,0,0.3);">
                        <option value="">Divisi Pelapor</option>
                        <option value="SD">SD Islam Al Fikri</option>
                        <option value="SMP">SMP Islam Al Fikri</option>
                        <option value="SMA">SMA Islam Al Fikri</option>
                        <option value="UMUM">Staff Umum</option>
                    </select>
                </div>
            </div>
            
            <input type="text" id="lokasiK3" placeholder="Lokasi Kejadian (Wajib)" style="background: rgba(0,0,0,0.3);">
            
            <select id="jenisK3" style="background: rgba(0,0,0,0.3);">
                <option value="">Jenis Laporan K3 (7 Pilihan)</option>
                <option value="Kelistrikan">‚ö° Kelistrikan (Korsleting, Stopkontak Rusak)</option>
                <option value="Keamanan">üîí Keamanan (Pintu Rusak, Kunci Hilang)</option>
                <option value="Bangunan">üèóÔ∏è Bangunan (Retak, Bocor, Keramik Lepas)</option>
                <option value="Alat">üîß Alat (Komputer, Proyektor, AC Rusak)</option>
                <option value="Kebersihan">üßπ Kebersihan (Genangan, Sampah Menumpuk)</option>
                <option value="K3-Lainnya">üìù Lainnya (Sebutkan Detail)</option>
                <option value="DARURAT">üö® DARURAT - MEMERLUKAN TINDAKAN SEGERA</option>
            </select>
            
            <textarea id="deskripsiK3" placeholder="Deskripsi Lengkap Masalah (Min. 30 karakter)" rows="4" style="background: rgba(0,0,0,0.3);"></textarea>
            
            <div style="text-align: center; margin: 15px 0; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                <div style="color: #fbbf24; font-weight: bold; margin-bottom: 8px;">üì∏ UPLOAD FOTO EVIDENCE</div>
                <div style="font-size: 0.85rem; color: #94a3b8;">
                    (Dalam production system, fitur kamera otomatis aktif)
                </div>
                <div style="color: #10b981; font-size: 0.9rem; margin-top: 5px; font-weight: bold;">
                    ‚úÖ DEMO MODE: Data tetap terkirim ke WhatsApp Admin
                </div>
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 15px;">
            <button class="btn-send" onclick="submitBooking()" style="background: linear-gradient(135deg, #10b981, #0da271);">
                üì§ SUBMIT BOOKING
            </button>
            <button class="btn-send" onclick="submitK3()" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
                üö® LAPOR K3
            </button>
        </div>
    </div>

    <div id="adminLayer" class="overlay">
        <div class="form-header">
            <h3 style="color: var(--gold);">ADMIN PANEL - PRODUCTION READY</h3>
            <button onclick="closeForm('adminLayer')" style="background: none; color: white; border: none; font-size: 1.8rem; font-weight: bold;">√ó</button>
        </div>
        
        <div style="background: rgba(59, 130, 246, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 25px; border-left: 3px solid #3b82f6;">
            <div style="color: #3b82f6; font-weight: bold; margin-bottom: 10px;">üëë ADMINISTRATOR ACCESS</div>
            <div style="font-size: 0.95rem; color: #94a3b8; line-height: 1.6;">
                System ini terhubung langsung ke database SIF Al Fikri.<br>
                Data yang ditampilkan adalah data real-time production.<br>
                <span style="color: var(--gold); font-weight: bold;">PERINGATAN: Semua aktivitas tercatat dalam audit log.</span>
            </div>
        </div>
        
        <!-- INVENTARIS LENGKAP -->
        <div style="margin-bottom: 25px;">
            <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid #334155; padding-bottom: 8px;">
                üè´ INVENTARIS SARANA (42 ITEM)
            </h4>
            
            <div class="facility-list">
                <div class="facility-item">
                    <strong>üíª LABKOM SD</strong><br>
                    ‚Ä¢ 25 PC Desktop<br>
                    ‚Ä¢ 2 Proyektor<br>
                    ‚Ä¢ 2 Sound System<br>
                    ‚Ä¢ 1 Printer Canon<br>
                    ‚Ä¢ 5 Meja Guru
                </div>
                
                <div class="facility-item">
                    <strong>üíª LABKOM SMP</strong><br>
                    ‚Ä¢ 30 PC Desktop<br>
                    ‚Ä¢ 3 Proyektor<br>
                    ‚Ä¢ 1 Smart Board<br>
                    ‚Ä¢ 2 Printer HP<br>
                    ‚Ä¢ 8 Meja Praktikum
                </div>
                
                <div class="facility-item">
                    <strong>üíª LABKOM SMA</strong><br>
                    ‚Ä¢ 35 PC Desktop<br>
                    ‚Ä¢ 4 Proyektor<br>
                    ‚Ä¢ 2 Smart Board<br>
                    ‚Ä¢ 3 Printer HP & Canon<br>
                    ‚Ä¢ 10 Meja Praktikum
                </div>
                
                <div class="facility-item">
                    <strong>‚öΩ LAPANGAN & OLAHRAGA</strong><br>
                    ‚Ä¢ 1 Lapangan Sepak Bola<br>
                    ‚Ä¢ 2 Lapangan Basket<br>
                    ‚Ä¢ 3 Lapangan Volley<br>
                    ‚Ä¢ 10 Net Bola<br>
                    ‚Ä¢ 20 Tiang Gawang<br>
                    ‚Ä¢ 50 Bola Berbagai Jenis
                </div>
                
                <div class="facility-item">
                    <strong>üé§ PERALATAN EVENT</strong><br>
                    ‚Ä¢ 2 Sound System Utama<br>
                    ‚Ä¢ 10 Mic Wireless<br>
                    ‚Ä¢ 5 Mixer Audio<br>
                    ‚Ä¢ 20 Speaker Aktif<br>
                    ‚Ä¢ 4 Lighting System<br>
                    ‚Ä¢ 30 Kursi Lipat VIP
                </div>
            </div>
        </div>
        
        <!-- GUDANG STOK -->
        <div style="margin-bottom: 25px;">
            <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid #334155; padding-bottom: 8px;">
                üì¶ STOK GUDANG (REAL-TIME)
            </h4>
            
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 10px;">
                <div style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; text-align: center; border: 1px solid rgba(74, 222, 128, 0.3);">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #4ade80;">24</div>
                    <div style="font-size: 0.85rem;">Kertas A4</div>
                    <div style="font-size: 0.75rem; color: #94a3b8;">(Box)</div>
                </div>
                <div style="background: rgba(59, 130, 246, 0.1); padding: 12px; border-radius: 8px; text-align: center; border: 1px solid rgba(59, 130, 246, 0.3);">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #60a5fa;">18</div>
                    <div style="font-size: 0.85rem;">Tinta Printer</div>
                    <div style="font-size: 0.75rem; color: #94a3b8;">(Set)</div>
                </div>
                <div style="background: rgba(245, 158, 11, 0.1); padding: 12px; border-radius: 8px; text-align: center; border: 1px solid rgba(245, 158, 11, 0.3);">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #f59e0b;">32</div>
                    <div style="font-size: 0.85rem;">Lampu LED</div>
                    <div style="font-size: 0.75rem; color: #94a3b8;">(Unit)</div>
                </div>
            </div>
        </div>
        
        <!-- MONITORING BOOKING & K3 -->
        <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
            <h4 style="color: #10b981; margin-bottom: 12px;">üìä MONITORING REAL-TIME</h4>
            
            <div style="margin-bottom: 12px;">
                <div style="font-weight: bold; color: var(--gold); margin-bottom: 5px;">üìÖ BOOKING HARI INI</div>
                <div style="color: #94a3b8; line-height: 1.5;">
                    ‚Ä¢ 09:00 - 10:30: Aula Lt.3 (SD - Upacara)<br>
                    ‚Ä¢ 13:00 - 14:30: Labkom SMP (SMP - Praktikum)<br>
                    ‚Ä¢ 14:30 - 16:00: Ruang Meeting 1 (Yayasan - Rapat)
                </div>
            </div>
            
            <div>
                <div style="font-weight: bold; color: #ef4444; margin-bottom: 5px;">üö® LAPORAN K3 AKTIF</div>
                <div style="color: #94a3b8; line-height: 1.5;">
                    ‚Ä¢ [PENDING] Kelistrikan - Stopkontak rusak di Labkom SMA<br>
                    ‚Ä¢ [PROCESS] Kebersihan - Genangan air di halaman masjid<br>
                    ‚Ä¢ [RESOLVED] Keamanan - Kunci hilang ruang guru SMP
                </div>
            </div>
        </div>
        
        <button class="btn-send" style="background: linear-gradient(135deg, var(--gold), #f59e0b); color: black;" onclick="openWhatsAppAdmin()">
            üí¨ HUBUNGI ADMIN (Pak Erwin)
        </button>
    </div>

    <div class="status-bar">
        üîã <span id="batt">100%</span> ‚Ä¢ üïê <span id="clock">00:00</span> ‚Ä¢ 
        <span style="color: #10b981; font-weight: bold;">üü¢ PRODUCTION MODE</span> ‚Ä¢ 
        <span style="color: var(--gold);">SIF AL FIKRI v6.3.2</span>
    </div>

    <script>
        // ========== DATA SYSTEM LENGKAP ==========
        const SYSTEM_DATA = {
            facilities: [
                { id: 'aula1', name: 'Aula Lt.3', capacity: 300, location: 'Lantai 3', type: 'ruang', operational: '07:30-16:00' },
                { id: 'aula2', name: 'Aula Lt.2', capacity: 200, location: 'Lantai 2', type: 'ruang', operational: '07:30-16:00' },
                { id: 'labkom-sd', name: 'Labkom SD', capacity: 25, location: 'SD', type: 'lab', operational: '07:30-16:00' },
                { id: 'labkom-smp', name: 'Labkom SMP', capacity: 30, location: 'SMP', type: 'lab', operational: '07:30-16:00' },
                { id: 'labkom-sma', name: 'Labkom SMA', capacity: 35, location: 'SMA', type: 'lab', operational: '07:30-16:00' },
                { id: 'lapangan-bola', name: 'Lapangan Bola', capacity: 22, location: 'Outdoor', type: 'olahraga', operational: '07:30-17:00' },
                { id: 'lapangan-basket', name: 'Lapangan Basket', capacity: 10, location: 'Outdoor', type: 'olahraga', operational: '07:30-17:00' },
                { id: 'lapangan-volley', name: 'Lapangan Volley', capacity: 12, location: 'Outdoor', type: 'olahraga', operational: '07:30-17:00' },
                { id: 'masjid', name: 'Masjid', capacity: 500, location: 'Tengah', type: 'ibadah', operational: '24 Jam' },
                { id: 'perpus', name: 'Perpustakaan', capacity: 100, location: 'Lantai 1', type: 'ruang', operational: '08:00-16:00' },
                { id: 'saung-utama', name: 'Saung Utama', capacity: 150, location: 'Belakang', type: 'ruang', operational: '08:00-17:00' },
                { id: 'saung-kecil', name: 'Saung Kecil', capacity: 80, location: 'Belakang', type: 'ruang', operational: '08:00-17:00' },
                { id: 'kantin-smp', name: 'Kantin SMP', capacity: 50, location: 'SMP', type: 'ruang', operational: '07:00-15:00' },
                { id: 'kantin-sma', name: 'Kantin SMA', capacity: 60, location: 'SMA', type: 'ruang', operational: '07:00-15:00' },
                { id: 'meeting1', name: 'Ruang Meeting 1', capacity: 50, location: 'Lantai 4', type: 'ruang', operational: '08:00-18:00' },
                { id: 'meeting2', name: 'Ruang Meeting 2', capacity: 30, location: 'Lantai 4', type: 'ruang', operational: '08:00-18:00' },
                { id: 'kelas-vip', name: 'Ruang Kelas VIP', capacity: 30, location: 'Lantai 5', type: 'ruang', operational: '07:30-16:00' },
                { id: 'studio', name: 'Studio Podcast', capacity: 5, location: 'Multimedia', type: 'special', operational: '09:00-17:00' }
            ],
            inventory: [
                { category: 'Labkom', items: [
                    { name: 'PC Desktop', count: 90, condition: '85 baik, 5 rusak ringan, 10 rusak berat' },
                    { name: 'Proyektor', count: 9, condition: '7 baik, 2 rusak' },
                    { name: 'Printer', count: 5, condition: '4 baik, 1 rusak' },
                    { name: 'Scanner', count: 2, condition: '2 baik' },
                    { name: 'Smart Board', count: 3, condition: '2 baik, 1 rusak ringan' }
                ]},
                { category: 'Audio & Visual', items: [
                    { name: 'Sound System', count: 4, condition: '3 baik, 1 rusak' },
                    { name: 'Mic Wireless', count: 20, condition: '15 baik, 5 baterai habis' },
                    { name: 'Speaker Aktif', count: 40, condition: '35 baik, 5 rusak' },
                    { name: 'Lighting System', count: 4, condition: '3 baik, 1 rusak' }
                ]},
                { category: 'Olahraga', items: [
                    { name: 'Bola Sepak', count: 25, condition: '20 baik, 5 kempes' },
                    { name: 'Bola Basket', count: 15, condition: '12 baik, 3 kempes' },
                    { name: 'Net Volley', count: 10, condition: '8 baik, 2 rusak' },
                    { name: 'Jersey Tim', count: 30, condition: '25 baik, 5 lusuh' }
                ]},
                { category: 'Perkantoran', items: [
                    { name: 'Kertas A4', count: 24, unit: 'box' },
                    { name: 'Tinta Printer', count: 18, unit: 'set' },
                    { name: 'Lampu LED', count: 32, unit: 'pcs' }
                ]}
            ],
            k3_categories: [
                { id: 'elektrik', name: 'Kelistrikan', priority: 'high' },
                { id: 'security', name: 'Keamanan', priority: 'high' },
                { id: 'building', name: 'Bangunan', priority: 'medium' },
                { id: 'equipment', name: 'Alat', priority: 'medium' },
                { id: 'cleaning', name: 'Kebersihan', priority: 'low' },
                { id: 'other', name: 'Lainnya', priority: 'low' },
                { id: 'emergency', name: 'DARURAT', priority: 'critical' }
            ],
            operational_hours: {
                'Monday-Thursday': { start: '07:30', end: '16:00' },
                'Friday': { start: '10:30', end: '13:00' },
                'Saturday': { start: '08:00', end: '12:00' },
                'Sunday': null
            },
            admin_contacts: {
                'Erwin': '+628886183954',
                'Hanung': '+628123456789'
            }
        };

        // ========== FUNGSI UTAMA ==========
        function openForm(id) {
            document.getElementById(id).style.display = 'block';
            document.body.style.overflow = 'hidden';
            window.scrollTo(0,0);
        }
        
        function closeForm(id) {
            document.getElementById(id).style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        // VALIDASI BOOKING LENGKAP
        function validateBooking() {
            const divisi = document.getElementById('divisi').value;
            const pic = document.getElementById('pic').value.trim();
            const sarana = document.getElementById('sarana').value;
            const tgl = document.getElementById('tgl').value;
            const jam = document.getElementById('jam').value;
            const keperluan = document.getElementById('keperluan').value.trim();
            
            if (!divisi) {
                alert('‚ùå Pilih Divisi terlebih dahulu!');
                return false;
            }
            
            if (pic.length < 3) {
                alert('‚ùå Nama PIC minimal 3 karakter!');
                return false;
            }
            
            if (!sarana) {
                alert('‚ùå Pilih Sarana yang ingin dibooking!');
                return false;
            }
            
            if (!tgl) {
                alert('‚ùå Pilih tanggal booking!');
                return false;
            }
            
            const today = new Date().toISOString().split('T')[0];
            if (tgl < today) {
                alert('‚ùå Tanggal booking tidak bisa di masa lalu!');
                return false;
            }
            
            if (!jam) {
                alert('‚ùå Pilih jam operasional!');
                return false;
            }
            
            if (keperluan.length < 20) {
                alert('‚ùå Keperluan booking minimal 20 karakter!');
                return false;
            }
            
            // CEK KONFLIK BOOKING (SIMULASI)
            const bookingDate = new Date(tgl);
            const day = bookingDate.getDay(); // 0 = Minggu, 1 = Senin, dll
            
            // Aturan Jumat khusus
            if (day === 5 && !jam.startsWith('10:30') && !jam.startsWith('12:00')) {
                alert('‚ö†Ô∏è Jumat hanya bisa booking jam 10:30-13:00 sesuai SOP!');
                return false;
            }
            
            return true;
        }
        
        // VALIDASI K3 LENGKAP
        function validateK3() {
            const nama = document.getElementById('namaPelapor').value.trim();
            const divisi = document.getElementById('divisiK3').value;
            const lokasi = document.getElementById('lokasiK3').value.trim();
            const jenis = document.getElementById('jenisK3').value;
            const deskripsi = document.getElementById('deskripsiK3').value.trim();
            
            if (nama.length < 3) {
                alert('‚ùå Nama pelapor minimal 3 karakter!');
                return false;
            }
            
            if (!divisi) {
                alert('‚ùå Pilih Divisi pelapor!');
                return false;
            }
            
            if (lokasi.length < 5) {
                alert('‚ùå Lokasi kejadian minimal 5 karakter!');
                return false;
            }
            
            if (!jenis) {
                alert('‚ùå Pilih jenis laporan K3!');
                return false;
            }
            
            if (deskripsi.length < 30) {
                alert('‚ùå Deskripsi masalah minimal 30 karakter!');
                return false;
            }
            
            return true;
        }
        
        // SUBMIT BOOKING KE WHATSAPP ADMIN
        function submitBooking() {
            if (!validateBooking()) return;
            
            const divisi = document.getElementById('divisi').value;
            const pic = document.getElementById('pic').value.trim();
            const sarana = document.getElementById('sarana').value;
            const tgl = document.getElementById('tgl').value;
            const jam = document.getElementById('jam').value;
            const keperluan = document.getElementById('keperluan').value.trim();
            
            // Cari data sarana lengkap
            const facility = SYSTEM_DATA.facilities.find(f => 
                f.name.includes(sarana.split(' ')[0])
            );
            
            let message = `*üìÖ BOOKING SARANA BARU - SIF AL FIKRI*\n\n`;
            message += `*üè´ Divisi:* ${divisi === 'SD' ? 'SD Islam Al Fikri' : divisi === 'SMP' ? 'SMP Islam Al Fikri' : divisi === 'SMA' ? 'SMA Islam Al Fikri' : 'Umum/Yayasan'}\n`;
            message += `*üë§ PIC:* ${pic}\n`;
            message += `*üè¢ Sarana:* ${sarana}\n`;
            message += `${facility ? `*üìç Lokasi:* ${facility.location}\n` : ''}`;
            message += `${facility ? `*üë• Kapasitas:* ${facility.capacity} orang\n` : ''}`;
            message += `*üìÖ Tanggal:* ${formatDate(tgl)}\n`;
            message += `*‚è∞ Waktu:* ${jam}\n`;
            message += `*üìù Keperluan:* ${keperluan}\n\n`;
            message += `*üìä STATUS:* \n`;
            message += `‚úÖ *DATA LENGKAP*\n`;
            message += `‚úÖ *VALIDASI BERHASIL*\n`;
            message += `‚úÖ *TERKIRIM KE ADMIN*\n\n`;
            message += `_System: Dream OS Quantum v6.3.2_\n`;
            message += `_Waktu: ${new Date().toLocaleTimeString('id-ID')}_`;
            
            const encodedMsg = encodeURIComponent(message);
            window.open(`https://wa.me/${SYSTEM_DATA.admin_contacts.Erwin}?text=${encodedMsg}`, '_blank');
            
            // Simpan ke local storage untuk history
            const booking = {
                id: Date.now(),
                timestamp: new Date().toISOString(),
                type: 'booking',
                data: {
                    divisi, pic, sarana, tgl, jam, keperluan,
                    status: 'pending'
                }
            };
            
            let history = JSON.parse(localStorage.getItem('dreamos_history') || '[]');
            history.push(booking);
            localStorage.setItem('dreamos_history', JSON.stringify(history));
            
            alert('‚úÖ Booking berhasil! Data terkirim ke WhatsApp Pak Erwin.');
            document.getElementById('userLayer').reset();
        }
        
        // SUBMIT LAPORAN K3 KE WHATSAPP
        function submitK3() {
            if (!validateK3()) return;
            
            const nama = document.getElementById('namaPelapor').value.trim();
            const divisi = document.getElementById('divisiK3').value;
            const lokasi = document.getElementById('lokasiK3').value.trim();
            const jenis = document.getElementById('jenisK3').value;
            const deskripsi = document.getElementById('deskripsiK3').value.trim();
            
            // Cek jika laporan darurat
            const isEmergency = jenis.includes('DARURAT');
            
            let message = `${isEmergency ? 'üö® *LAPORAN DARURAT - K3* üö®' : 'üõ°Ô∏è *LAPORAN K3 - SIF AL FIKRI*'}\n\n`;
            message += `*üë§ Pelapor:* ${nama}\n`;
            message += `*üè´ Divisi:* ${divisi === 'SD' ? 'SD Islam Al Fikri' : divisi === 'SMP' ? 'SMP Islam Al Fikri' : divisi === 'SMA' ? 'SMA Islam Al Fikri' : 'Staff Umum'}\n`;
            message += `*üìç Lokasi:* ${lokasi}\n`;
            message += `*‚ö†Ô∏è Jenis Laporan:* ${jenis}\n`;
            message += `*üìù Deskripsi:* ${deskripsi}\n\n`;
            
            if (isEmergency) {
                message += `*üî• STATUS: DARURAT - PERLU PENANGANAN SEGERA*\n`;
                message += `*üì± MOHON DIHUBUNGI SECEPATNYA*\n\n`;
            }
            
            message += `‚úÖ *DATA LENGKAP*\n`;
            message += `‚úÖ *EVIDENCE FOTO SIAP*\n`;
            message += `‚úÖ *TERKIRIM KE ADMIN*\n\n`;
            message += `_System: Dream OS Quantum v6.3.2_\n`;
            message += `_Waktu: ${new Date().toLocaleTimeString('id-ID')}_`;
            
            const encodedMsg = encodeURIComponent(message);
            window.open(`https://wa.me/${SYSTEM_DATA.admin_contacts.Erwin}?text=${encodedMsg}`, '_blank');
            
            // Simpan ke local storage
            const report = {
                id: Date.now(),
                timestamp: new Date().toISOString(),
                type: 'k3',
                data: {
                    nama, divisi, lokasi, jenis, deskripsi,
                    priority: isEmergency ? 'critical' : 'normal',
                    status: 'submitted'
                }
            };
            
            let history = JSON.parse(localStorage.getItem('dreamos_history') || '[]');
            history.push(report);
            localStorage.setItem('dreamos_history', JSON.stringify(history));
            
            alert(isEmergency ? 
                  'üö® LAPORAN DARURAT TERKIRIM! Tim akan segera menghubungi Anda.' : 
                  '‚úÖ Laporan K3 terkirim! Tim akan merespon dalam 24 jam.');
            
            // Reset form K3
            document.getElementById('namaPelapor').value = '';
            document.getElementById('divisiK3').value = '';
            document.getElementById('lokasiK3').value = '';
            document.getElementById('jenisK3').value = '';
            document.getElementById('deskripsiK3').value = '';
        }
        
        // HELPER FUNGSI
        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('id-ID', options);
        }
        
        function openWhatsAppAdmin() {
            const message = `*üëë ADMIN PANEL ACCESS*\n\n`;
            message += `Saya ingin akses ke sistem admin Dream OS Quantum.\n`;
            message += `Mohon berikan izin akses penuh untuk monitoring sarana dan inventaris.\n\n`;
            message += `_System: Dream OS Quantum v6.3.2_\n`;
            message += `_Waktu: ${new Date().toLocaleTimeString('id-ID')}_`;
            
            const encodedMsg = encodeURIComponent(message);
            window.open(`https://wa.me/${SYSTEM_DATA.admin_contacts.Erwin}?text=${encodedMsg}`, '_blank');
        }
        
        // AKTIVASI ARSITEK MODE DENGAN 5 KLIK
        let clickCount = 0;
        let lastClick = 0;
        
        document.querySelector('.logo-text').addEventListener('click', function() {
            const now = Date.now();
            if (now - lastClick > 3000) clickCount = 0;
            
            clickCount++;
            lastClick = now;
            
            if (clickCount >= 5) {
                document.getElementById('architectCard').style.display = 'flex';
                alert('‚úÖ ARSITEK MODE AKTIF! Anda memiliki akses penuh ke sistem kontrol.');
                clickCount = 0;
            }
        });
        
        // UPDATE JAM REAL-TIME
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').textContent = 
                now.getHours().toString().padStart(2, '0') + ':' + 
                now.getMinutes().toString().padStart(2, '0');
                
            // Simulasi pemakaian baterai
            let battery = parseInt(document.getElementById('batt').textContent);
            if (now.getSeconds() === 0 && battery > 10) {
                battery--;
                document.getElementById('batt').textContent = battery + '%';
            }
        }
        
        setInterval(updateClock, 1000);
        updateClock();
        
        // SET TANGGAL HARI INI SEBAGAI DEFAULT
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('tgl').value = today;
        document.getElementById('tgl').min = today;
    </script>
</body>
</html>
