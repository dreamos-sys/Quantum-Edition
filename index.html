<!DOCTYPE html>
<html lang="id" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üåå DREAM OS v4.2 FINAL ‚Ä¢ SIF Al Fikri General Affairs</title>
    
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <style>
        :root {
            --primary: #0a0a2a; --secondary: #00d4ff; --accent: #4CAF50;
            --danger: #ff3860; --warning: #FF9800; --purple: #9c27b0;
            --dark-surface: rgba(255, 255, 255, 0.05);
            --glass: rgba(255, 255, 255, 0.1);
        }
        
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter', 'Segoe UI', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--primary); color: white; min-height: 100vh; overflow-x: hidden; line-height: 1.6; }

        /* SCROLLBAR CUSTOM */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: var(--primary); }
        ::-webkit-scrollbar-thumb { background: var(--secondary); border-radius: 10px; }
        
        /* HEADER ENHANCEMENT */
        .header { 
            background: linear-gradient(180deg, rgba(45,93,75,0.8) 0%, rgba(10,10,42,1) 100%);
            padding: 2rem 1rem; 
            text-align: center; 
            border-bottom: 1px solid var(--glass);
            position: sticky; top: 0; z-index: 900; backdrop-filter: blur(10px);
        }
        
        .arabic { font-family: 'Amiri', serif; font-size: 1.8rem; color: #4CAF50; margin-bottom: 0.5rem; text-shadow: 0 0 10px rgba(76,175,80,0.3); }
        .shalawat { font-size: 1rem; color: var(--warning); margin-bottom: 0.8rem; letter-spacing: 1px; }
        
        /* MODERN NAV BAR */
        .nav { 
            position: fixed; bottom: 15px; left: 15px; right: 15px; 
            background: rgba(15, 15, 45, 0.85); 
            display: flex; padding: 0.6rem; 
            backdrop-filter: blur(20px); z-index: 1000;
            border-radius: 25px; border: 1px solid var(--glass);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .nav-item { 
            flex: 1; text-align: center; color: rgba(255,255,255,0.5); 
            padding: 0.8rem 0; font-size: 0.7rem; cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            border-radius: 20px; display: flex; flex-direction: column; align-items: center;
        }
        
        .nav-item.active { color: var(--secondary); background: rgba(0,212,255,0.1); transform: translateY(-5px); }
        .nav-icon { font-size: 1.4rem; margin-bottom: 3px; }

        /* CONTENT LAYOUT */
        .content { padding: 1rem; padding-bottom: 100px; max-width: 600px; margin: 0 auto; transition: opacity 0.3s; }

        /* MODERN CARD UX */
        .card { 
            background: var(--dark-surface); border-radius: 24px; padding: 1.5rem; 
            margin-bottom: 1.5rem; border: 1px solid var(--glass); 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .card-title { font-size: 1.2rem; font-weight: 700; color: var(--secondary); margin-bottom: 1.2rem; display: flex; align-items: center; gap: 10px; }

        /* GRID STATS */
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .stat-item { 
            background: rgba(255,255,255,0.03); padding: 1rem; border-radius: 18px; 
            border: 1px solid var(--glass); text-align: center;
        }
        .stat-value { font-size: 1.4rem; font-weight: 800; display: block; }
        .stat-label { font-size: 0.75rem; color: rgba(255,255,255,0.6); }

        /* INPUT UX */
        .form-group { margin-bottom: 1.2rem; }
        .form-label { display: block; font-size: 0.85rem; margin-bottom: 0.5rem; color: rgba(255,255,255,0.7); padding-left: 4px; }
        
        .form-input, .form-select, .form-textarea { 
            width: 100%; padding: 1rem; background: rgba(0,0,0,0.2); 
            border: 1px solid var(--glass); border-radius: 14px; 
            color: white; font-size: 1rem; outline: none; transition: 0.3s;
        }
        
        .form-input:focus { border-color: var(--secondary); box-shadow: 0 0 15px rgba(0,212,255,0.2); }

        /* BUTTONS */
        .btn { 
            width: 100%; padding: 1.1rem; border-radius: 16px; border: none; 
            font-weight: 700; cursor: pointer; transition: 0.3s; 
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-primary { background: linear-gradient(135deg, #00d4ff, #0072ff); color: white; }
        .btn-primary:active { transform: scale(0.98); }

        /* NOTIFIKASI */
        .toast {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            background: var(--secondary); color: var(--primary);
            padding: 12px 24px; border-radius: 50px; font-weight: 700;
            z-index: 2000; display: none; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* ANIMATIONS */
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-up { animation: slideUp 0.4s ease forwards; }
    </style>
</head>
<body>

    <div id="toast" class="toast"></div>

    <header class="header">
        <div class="arabic">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸíŸÖŸê</div>
        <div class="shalawat">Allahumma Sholli 'Ala Sayyidina Muhammad</div>
        <div style="font-size: 0.8rem; opacity: 0.6; font-weight: 600;">DREAM OS v4.2 ‚Ä¢ GENERAL AFFAIRS</div>
    </header>

    <main id="content" class="content">
        <section id="view-home" class="animate-up">
            <div class="card">
                <div class="card-title">üöÄ Welcome back, My Bro!</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-value" id="count-booking">0</span>
                        <span class="stat-label">Bookings</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" style="color: var(--warning);" id="count-k3">0</span>
                        <span class="stat-label">Laporan K3</span>
                    </div>
                </div>
            </div>

            <div class="card" style="border-left: 4px solid var(--warning);">
                <div style="color: var(--warning); font-weight: 700; margin-bottom: 5px;">üì¢ Info Penting</div>
                <p style="font-size: 0.85rem; opacity: 0.8;">
                    Masjid dalam masa renovasi. Aula SMP tidak tersedia di hari Jumat (Shalat Jumat).
                </p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <button class="btn btn-primary" onclick="showView('booking')" style="background: rgba(0,212,255,0.1); border: 1px solid var(--secondary); color: var(--secondary);">
                    üìÖ Booking
                </button>
                <button class="btn btn-primary" onclick="showView('k3')" style="background: rgba(255,152,0,0.1); border: 1px solid var(--warning); color: var(--warning);">
                    ‚ö†Ô∏è Lapor K3
                </button>
            </div>
        </section>
    </main>

    <nav class="nav">
        <div class="nav-item active" onclick="showView('home')">
            <span class="nav-icon">üè†</span>
            <span>Home</span>
        </div>
        <div class="nav-item" onclick="showView('booking')">
            <span class="nav-icon">üìÖ</span>
            <span>Booking</span>
        </div>
        <div class="nav-item" onclick="showView('k3')">
            <span class="nav-icon">‚ö†Ô∏è</span>
            <span>K3</span>
        </div>
        <div class="nav-item" onclick="showView('inventory')">
            <span class="nav-icon">üîß</span>
            <span>Items</span>
        </div>
        <div class="nav-item" onclick="showView('admin')">
            <span class="nav-icon">üîê</span>
            <span>Admin</span>
        </div>
    </nav>

    <script>
        const CONFIG = {
            whatsapp: "628886183954",
            contactName: "Pak Erwin (GA)"
        };

        // UI NAVIGATION SYSTEM
        function showView(view) {
            const content = document.getElementById('content');
            
            // Update Active Nav
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if(item.innerText.toLowerCase().includes(view)) item.classList.add('active');
            });

            // Switch Content
            if(view === 'home') renderHome();
            if(view === 'booking') renderBooking();
            if(view === 'k3') renderK3();
            if(view === 'inventory') renderInventory();
            if(view === 'admin') renderAdmin();
        }

        function renderHome() {
            location.reload(); // Sederhana untuk refresh dashboard
        }

        function renderBooking() {
            document.getElementById('content').innerHTML = `
                <div class="animate-up">
                    <div class="card">
                        <div class="card-title">üìÖ Form Booking Sarana</div>
                        <div class="form-group">
                            <label class="form-label">Nama Pemohon</label>
                            <input type="text" id="b-nama" class="form-input" placeholder="Nama Anda...">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Sarana</label>
                            <select id="b-sarana" class="form-select">
                                <option value="Aula SMP">Aula SMP</option>
                                <option value="Aula SMA">Aula SMA</option>
                                <option value="Saung Besar">Saung Besar</option>
                                <option value="Lab Komputer">Lab Komputer</option>
                            </select>
                        </div>
                        <div class="form-group" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div>
                                <label class="form-label">Tanggal</label>
                                <input type="date" id="b-tgl" class="form-input">
                            </div>
                            <div>
                                <label class="form-label">Peserta</label>
                                <input type="number" id="b-pax" class="form-input" placeholder="0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Keperluan</label>
                            <textarea id="b-perlu" class="form-textarea" rows="3"></textarea>
                        </div>
                        <button class="btn btn-primary" onclick="submitBooking()">
                            üöÄ Kirim Permohonan via WA
                        </button>
                    </div>
                </div>
            `;
        }

        function renderK3() {
            document.getElementById('content').innerHTML = `
                <div class="animate-up">
                    <div class="card">
                        <div class="card-title">‚ö†Ô∏è Laporan Kerusakan (K3)</div>
                        <div class="form-group">
                            <label class="form-label">Lokasi</label>
                            <input type="text" id="k-lokasi" class="form-input" placeholder="Misal: Toilet Lantai 2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Masalah</label>
                            <textarea id="k-masalah" class="form-textarea" rows="4" placeholder="Jelaskan kerusakannya..."></textarea>
                        </div>
                        <button class="btn" style="background: var(--warning); color: white;" onclick="submitK3()">
                            üö® Laporkan Sekarang
                        </button>
                    </div>
                </div>
            `;
        }

        function renderInventory() {
            document.getElementById('content').innerHTML = `
                <div class="card animate-up">
                    <div class="card-title">üîß Status Inventaris</div>
                    <div style="opacity: 0.7; text-align: center; padding: 2rem;">
                        Fitur stok barang sedang sinkronisasi dengan database pusat.
                    </div>
                </div>
            `;
        }

        function renderAdmin() {
            const pass = prompt("Masukkan Admin Password:");
            if(pass === "@dm1n_Sec2025") {
                showToast("Akses Diterima", "success");
                document.getElementById('content').innerHTML = `<div class="card"><h3>üëë Admin Mode Active</h3><p>Log aktivitas akan muncul di sini.</p></div>`;
            } else {
                showToast("Password Salah!", "error");
                showView('home');
            }
        }

        // FUNCTIONALITY
        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.style.display = 'block';
            setTimeout(() => t.style.display = 'none', 3000);
        }

        function submitBooking() {
            const nama = document.getElementById('b-nama').value;
            const sarana = document.getElementById('b-sarana').value;
            const tgl = document.getElementById('b-tgl').value;
            const perlu = document.getElementById('b-perlu').value;

            if(!nama || !tgl) return showToast("Mohon lengkapi form!");

            const msg = `Halo ${CONFIG.contactName}, saya ${nama} ingin booking ${sarana} untuk tanggal ${tgl}. Keperluan: ${perlu}. Mohon konfirmasinya.`;
            window.open(`https://wa.me/${CONFIG.whatsapp}?text=${encodeURIComponent(msg)}`);
        }

        function submitK3() {
            const lokasi = document.getElementById('k-lokasi').value;
            const masalah = document.getElementById('k-masalah').value;

            if(!lokasi || !masalah) return showToast("Mohon lengkapi laporan!");

            const msg = `*LAPORAN K3*\nLokasi: ${lokasi}\nMasalah: ${masalah}\nSegera ditindak lanjuti.`;
            window.open(`https://wa.me/${CONFIG.whatsapp}?text=${encodeURIComponent(msg)}`);
        }

        // Initialize Stats
        document.getElementById('count-booking').innerText = Math.floor(Math.random() * 10) + 5;
        document.getElementById('count-k3').innerText = Math.floor(Math.random() * 5);

    </script>
</body>
</html>
