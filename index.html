<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- PWA META -->
    <meta name="theme-color" content="#0a0f1e" media="(prefers-color-scheme: dark)">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <title>üè∞ DREAM OS ULTIMATE v19.0 | Complete System</title>
    
    <style>
        /* ========== VARIABLES ========== */
        :root {
            /* Dark Theme (Default) */
            --bg-primary: #0a0f1e;
            --bg-secondary: #151a2d;
            --bg-card: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-dim: #64748b;
            --border-color: #334155;
            --accent-gold: #fbbf24;
            --accent-green: #10b981;
            --accent-blue: #3b82f6;
            --accent-red: #ef4444;
            --accent-purple: #8b5cf6;
            --shadow-card: 0 4px 20px rgba(0,0,0,0.3);
            --shadow-glow: 0 0 20px rgba(251, 191, 36, 0.2);
        }

        [data-theme="light"] {
            /* Light Theme */
            --bg-primary: #f8fafc;
            --bg-secondary: #f1f5f9;
            --bg-card: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-dim: #94a3b8;
            --border-color: #e2e8f0;
            --accent-gold: #d97706;
            --accent-green: #059669;
            --accent-blue: #2563eb;
            --accent-red: #dc2626;
            --accent-purple: #7c3aed;
            --shadow-card: 0 4px 20px rgba(0,0,0,0.1);
            --shadow-glow: 0 0 20px rgba(217, 119, 6, 0.1);
        }

        /* ========== BASE STYLES ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }

        /* ========== APP LAYOUT ========== */
        .app-container {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* ========== HEADER ========== */
        .app-header {
            background: var(--bg-secondary);
            padding: 20px 15px;
            border-bottom: 3px solid var(--accent-gold);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-card);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo {
            font-size: 2rem;
            color: var(--accent-gold);
        }

        .title-section h1 {
            font-size: 1.3rem;
            color: var(--accent-gold);
            font-weight: 900;
            line-height: 1.2;
        }

        .title-section .subtitle {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        /* ========== BOTTOM NAV ========== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--bg-secondary);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            border-top: 2px solid var(--border-color);
            z-index: 1000;
            max-width: 480px;
            margin: 0 auto;
            left: 50%;
            transform: translateX(-50%);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-dim);
            flex: 1;
            cursor: pointer;
            padding: 5px 0;
            transition: all 0.3s;
            border-radius: 10px;
            margin: 0 5px;
        }

        .nav-item.active {
            color: var(--accent-gold);
            background: rgba(251, 191, 36, 0.1);
        }

        .nav-icon {
            font-size: 1.3rem;
            margin-bottom: 4px;
            transition: transform 0.3s;
        }

        .nav-item.active .nav-icon {
            transform: translateY(-2px);
        }

        .nav-label {
            font-size: 0.7rem;
            font-weight: 700;
        }

        /* ========== MAIN CONTENT ========== */
        .main-content {
            padding: 20px 15px 80px;
            min-height: calc(100vh - 140px);
        }

        /* ========== VIEW SYSTEM ========== */
        .view {
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .view.active {
            display: block;
        }

        /* ========== DASHBOARD ========== */
        .welcome-banner {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-purple) 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
            box-shadow: var(--shadow-card);
        }

        .welcome-banner h2 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .welcome-banner p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .quick-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--accent-gold);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* ========== FORM CARD ========== */
        .form-card {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-card);
        }

        .form-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent-gold);
        }

        .form-icon {
            font-size: 1.5rem;
            color: var(--accent-gold);
        }

        .form-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .form-subtitle {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* ========== FORM ELEMENTS ========== */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .form-label.required:after {
            content: " *";
            color: var(--accent-red);
        }

        .form-input {
            width: 100%;
            padding: 14px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 14px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 16px;
            cursor: pointer;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
            line-height: 1.5;
            font-family: inherit;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        /* ========== BUTTONS ========== */
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 0;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue) 0%, #1d4ed8 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--accent-green) 0%, #047857 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--accent-gold) 0%, #b45309 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--accent-red) 0%, #b91c1c 100%);
        }

        /* ========== MODAL ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            border: 3px solid var(--accent-gold);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.3rem;
            color: var(--accent-gold);
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--text-secondary);
            cursor: pointer;
            line-height: 1;
        }

        /* ========== SETTINGS PAGE ========== */
        .settings-section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1rem;
            color: var(--accent-blue);
            margin-bottom: 15px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--bg-card);
            border-radius: 10px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
        }

        .settings-item:active {
            background: var(--bg-secondary);
        }

        .item-label {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .item-icon {
            font-size: 1.2rem;
            color: var(--accent-gold);
        }

        .item-text {
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .item-description {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 3px;
        }

        .item-value {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* ========== TOGGLE SWITCH ========== */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--border-color);
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--accent-gold);
        }

        input:checked + .slider:before {
            transform: translateX(24px);
        }

        /* ========== LOADER ========== */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--border-color);
            border-top: 3px solid var(--accent-gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ========== UTILITIES ========== */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-10 {
            margin-bottom: 10px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mt-10 {
            margin-top: 10px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 480px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- LOADER -->
        <div id="loader" class="loader">
            <div class="loader-spinner"></div>
            <div style="color: var(--accent-gold); font-weight: 700; font-size: 1.1rem;">
                DREAM OS v19.0
            </div>
            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 10px;">
                Loading Complete System...
            </div>
        </div>

        <!-- HEADER -->
        <div class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">üè∞</div>
                    <div class="title-section">
                        <h1>DREAM OS</h1>
                        <div class="subtitle">MA Salafiyah Al Fikri ‚Ä¢ v19.0</div>
                    </div>
                </div>
                <div style="text-align: right;">
                    <div id="currentTime" style="font-size: 0.9rem; color: var(--accent-gold);"></div>
                    <div id="batteryStatus" style="font-size: 0.7rem; color: var(--text-secondary);">üîã --%</div>
                </div>
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="main-content">
            <!-- HOME VIEW -->
            <div id="homeView" class="view active">
                <div class="welcome-banner">
                    <h2>Selamat Datang di DREAM OS</h2>
                    <p>Sistem Terintegrasi MA Salafiyah Al Fikri</p>
                </div>

                <div class="quick-stats">
                    <div class="stat-card">
                        <div class="stat-value">22</div>
                        <div class="stat-label">Sarana</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="todayBookings">0</div>
                        <div class="stat-label">Booking Hari Ini</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="systemStatus">üü¢</div>
                        <div class="stat-label">Status</div>
                    </div>
                </div>

                <!-- FORM MENU -->
                <div class="form-card" onclick="showBookingForm()" style="cursor: pointer;">
                    <div class="form-header">
                        <div class="form-icon">üìÖ</div>
                        <div>
                            <div class="form-title">FORM BOOKING SARANA</div>
                            <div class="form-subtitle">22 sarana lengkap dengan aturan booking</div>
                        </div>
                    </div>
                </div>

                <div class="form-card" onclick="showK3Form()" style="cursor: pointer;">
                    <div class="form-header">
                        <div class="form-icon">üõ°Ô∏è</div>
                        <div>
                            <div class="form-title">FORM LAPORAN K3</div>
                            <div class="form-subtitle">Laporan kecelakaan & potensi bahaya</div>
                        </div>
                    </div>
                </div>

                <div class="form-card" onclick="showSecurityForm()" style="cursor: pointer;">
                    <div class="form-header">
                        <div class="form-icon">üíÇ</div>
                        <div>
                            <div class="form-title">FORM LAPORAN SEKURITI</div>
                            <div class="form-subtitle">Patroli harian & insiden keamanan</div>
                        </div>
                    </div>
                </div>

                <div class="form-card" onclick="showView('settings')" style="cursor: pointer;">
                    <div class="form-header">
                        <div class="form-icon">‚öôÔ∏è</div>
                        <div>
                            <div class="form-title">PANEL PENGATURAN</div>
                            <div class="form-subtitle">Theme, cache, battery, ISO compliance</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SETTINGS VIEW -->
            <div id="settingsView" class="view">
                <div class="settings-section">
                    <div class="section-title">‚öôÔ∏è PENGATURAN SISTEM</div>
                    
                    <div class="settings-item" onclick="toggleTheme()">
                        <div class="item-label">
                            <div class="item-icon">üåì</div>
                            <div>
                                <div class="item-text">Mode Tampilan</div>
                                <div class="item-description">Terang/Gelap</div>
                            </div>
                        </div>
                        <div class="item-value" id="themeStatus">Gelap</div>
                    </div>

                    <div class="settings-item" onclick="showModal('batteryModal')">
                        <div class="item-label">
                            <div class="item-icon">üîã</div>
                            <div>
                                <div class="item-text">Optimasi Baterai</div>
                                <div class="item-description">Pengaturan hemat daya</div>
                            </div>
                        </div>
                        <div class="item-value">‚Üí</div>
                    </div>

                    <div class="settings-item" onclick="clearCache()">
                        <div class="item-label">
                            <div class="item-icon">üßπ</div>
                            <div>
                                <div class="item-text">Bersihkan Cache</div>
                                <div class="item-description">Hapus data sementara</div>
                            </div>
                        </div>
                        <div class="item-value">‚Üí</div>
                    </div>

                    <div class="settings-item" onclick="showModal('isoModal')">
                        <div class="item-label">
                            <div class="item-icon">üèÖ</div>
                            <div>
                                <div class="item-text">ISO 27001 Compliance</div>
                                <div class="item-description">Status keamanan sistem</div>
                            </div>
                        </div>
                        <div class="item-value">üü¢</div>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="section-title">üìä DIAGNOSTIK SISTEM</div>
                    
                    <div class="settings-item">
                        <div class="item-label">
                            <div class="item-icon">üíæ</div>
                            <div>
                                <div class="item-text">Penyimpanan</div>
                                <div class="item-description">Kapasitas tersedia</div>
                            </div>
                        </div>
                        <div class="item-value" id="storageInfo">-- MB</div>
                    </div>

                    <div class="settings-item">
                        <div class="item-label">
                            <div class="item-icon">üì∂</div>
                            <div>
                                <div class="item-text">Koneksi</div>
                                <div class="item-description">Status jaringan</div>
                            </div>
                        </div>
                        <div class="item-value" id="connectionStatus">Online</div>
                    </div>

                    <div class="settings-item">
                        <div class="item-label">
                            <div class="item-icon">üîÑ</div>
                            <div>
                                <div class="item-text">Versi Sistem</div>
                                <div class="item-description">DREAM OS v19.0</div>
                            </div>
                        </div>
                        <div class="item-value">20250111</div>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="section-title">üîê KEAMANAN</div>
                    
                    <div class="settings-item" onclick="showLogin()">
                        <div class="item-label">
                            <div class="item-icon">üë§</div>
                            <div>
                                <div class="item-text">Ganti Role</div>
                                <div class="item-description">Login sebagai role lain</div>
                            </div>
                        </div>
                        <div class="item-value">‚Üí</div>
                    </div>

                    <div class="settings-item" onclick="showModal('sessionModal')">
                        <div class="item-label">
                            <div class="item-icon">‚è±Ô∏è</div>
                            <div>
                                <div class="item-text">Session Timeout</div>
                                <div class="item-description">30 menit</div>
                            </div>
                        </div>
                        <div class="item-value">‚Üí</div>
                    </div>

                    <div class="settings-item" onclick="exportData()">
                        <div class="item-label">
                            <div class="item-icon">üì§</div>
                            <div>
                                <div class="item-text">Ekspor Data</div>
                                <div class="item-description">Backup semua laporan</div>
                            </div>
                        </div>
                        <div class="item-value">‚Üí</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BOTTOM NAVIGATION -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="showView('home')">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" onclick="showView('booking')">
                <div class="nav-icon">üìÖ</div>
                <div class="nav-label">Booking</div>
            </div>
            <div class="nav-item" onclick="showView('k3')">
                <div class="nav-icon">üõ°Ô∏è</div>
                <div class="nav-label">K3</div>
            </div>
            <div class="nav-item" onclick="showView('security')">
                <div class="nav-icon">üíÇ</div>
                <div class="nav-label">Security</div>
            </div>
            <div class="nav-item" onclick="showView('settings')">
                <div class="nav-icon">‚öôÔ∏è</div>
                <div class="nav-label">Settings</div>
            </div>
        </div>
    </div>

    <!-- ========== MODALS ========== -->
    <!-- BOOKING FORM MODAL -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üìÖ FORM BOOKING SARANA</div>
                <button class="modal-close" onclick="closeModal('bookingModal')">√ó</button>
            </div>

            <div style="max-height: 60vh; overflow-y: auto; padding-right: 10px;">
                <div class="form-group">
                    <label class="form-label required">Pilih Sarana (22 Unit)</label>
                    <select class="form-select" id="bookingSarana">
                        <option value="">-- Pilih Sarana --</option>
                        <optgroup label="üèõÔ∏è AULA UTAMA">
                            <option value="aula_smp">Aula SMP (Kapasitas: 200 orang)</option>
                            <option value="aula_sma">Aula SMA (Kapasitas: 150 orang)</option>
                            <option value="aula_serbaguna">Aula Serba Guna (Kapasitas: 100 orang)</option>
                            <option value="saung_besar">Saung Besar (Kapasitas: 50 orang)</option>
                            <option value="saung_kecil">Saung Kecil (Kapasitas: 30 orang)</option>
                        </optgroup>
                        <optgroup label="üíª LAB KOMPUTER">
                            <option value="labkom_sd">Lab Komputer SD (30 unit PC)</option>
                            <option value="labkom_smp">Lab Komputer SMP (40 unit PC)</option>
                            <option value="labkom_sma">Lab Komputer SMA (50 unit PC)</option>
                        </optgroup>
                        <optgroup label="üåø OUTDOOR AREA">
                            <option value="lapangan_sma">Lapangan SMA</option>
                            <option value="lapangan_basket">Lapangan Basket</option>
                            <option value="lapangan_volley">Lapangan Volley</option>
                            <option value="lapangan_futsal">Lapangan Futsal</option>
                            <option value="lapangan_rumput">Lapangan Rumput</option>
                        </optgroup>
                        <optgroup label="üçΩÔ∏è KANTIN & MAKAN">
                            <option value="kantin_smp">Kantin SMP</option>
                            <option value="kantin_sma">Kantin SMA</option>
                        </optgroup>
                        <optgroup label="üìö PERPUSTAKAAN">
                            <option value="perpus_sd">Perpustakaan SD</option>
                            <option value="perpus_smp">Perpustakaan SMP</option>
                            <option value="perpus_sma">Perpustakaan SMA</option>
                        </optgroup>
                        <optgroup label="üïå IBADAH">
                            <option value="musholla_sma">Musholla SMA</option>
                            <option value="masjid" disabled>Masjid (Maintenance)</option>
                        </optgroup>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label required">Nama Pemesan</label>
                    <input type="text" class="form-input" id="bookingName" placeholder="Nama lengkap beserta gelar">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Unit/Jurusan</label>
                        <select class="form-select" id="bookingUnit">
                            <option value="">-- Pilih Unit --</option>
                            <option value="SD">SD Al Fikri</option>
                            <option value="SMP">SMP Al Fikri</option>
                            <option value="SMA">SMA Al Fikri</option>
                            <option value="Umum">Umum/Luar</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label required">No. HP</label>
                        <input type="tel" class="form-input" id="bookingPhone" placeholder="08xxxxxxxxxx">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Tanggal</label>
                        <input type="date" class="form-input" id="bookingDate">
                    </div>
                    <div class="form-group">
                        <label class="form-label required">Waktu Mulai</label>
                        <input type="time" class="form-input" id="bookingStart" value="07:30">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Waktu Selesai</label>
                        <input type="time" class="form-input" id="bookingEnd" value="16:00">
                    </div>
                    <div class="form-group">
                        <label class="form-label required">Jumlah Peserta</label>
                        <input type="number" class="form-input" id="bookingParticipants" min="1" value="1">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label required">Jenis Acara</label>
                    <select class="form-select" id="bookingEventType">
                        <option value="">-- Pilih Jenis Acara --</option>
                        <option value="rapat">Rapat</option>
                        <option value="seminar">Seminar/Workshop</option>
                        <option value="lomba">Lomba/Kompetisi</option>
                        <option value="pelatihan">Pelatihan</option>
                        <option value="ujian">Ujian/Test</option>
                        <option value="acara_sosial">Acara Sosial</option>
                        <option value="lainnya">Lainnya</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label required">Peralatan yang Dibutuhkan</label>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" value="sound"> Sound System
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" value="projector"> Projector
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" value="ac"> AC
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" value="meja_kursi"> Meja & Kursi
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" value="whiteboard"> Whiteboard
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" value="wifi"> WiFi Access
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label required">Keterangan/Keperluan</label>
                    <textarea class="form-input form-textarea" id="bookingNotes" placeholder="Detail keperluan acara, agenda, dan informasi penting lainnya..."></textarea>
                </div>

                <div style="background: rgba(251, 191, 36, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                    <div style="color: var(--accent-gold); font-weight: 700; margin-bottom: 10px;">üìã ATURAN BOOKING:</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.4;">
                        1. Booking minimal 1 hari sebelumnya<br>
                        2. Jam operasional: 07:30 - 16:00 WIB<br>
                        3. Hari Sabtu perlu konfirmasi khusus<br>
                        4. Jumat 10:30-13:00: Aula tidak tersedia<br>
                        5. Mohon jaga kebersihan sarana
                    </div>
                </div>
            </div>

            <button class="btn btn-success" onclick="submitBooking()">
                üì° KIRIM BOOKING
            </button>
        </div>
    </div>

    <!-- K3 FORM MODAL -->
    <div id="k3Modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üõ°Ô∏è FORM LAPORAN K3</div>
                <button class="modal-close" onclick="closeModal('k3Modal')">√ó</button>
            </div>

            <div style="max-height: 60vh; overflow-y: auto; padding-right: 10px;">
                <div class="form-group">
                    <label class="form-label required">Jenis Insiden</label>
                    <select class="form-select" id="k3IncidentType">
                        <option value="">-- Pilih Jenis Insiden --</option>
                        <option value="kecelakaan_kerja">Kecelakaan Kerja</option>
                        <option value="potensi_bahaya">Potensi Bahaya</option>
                        <option value="kebakaran">Kebakaran/Kebocoran Gas</option>
                        <option value="listrik">Gangguan Listrik</option>
                        <option value="struktur">Kerusakan Struktur Bangunan</option>
                        <option value="kimia">Tumpahan Bahan Kimia</option>
                        <option value="medis">Keadaan Darurat Medis</option>
                        <option value="lingkungan">Pencemaran Lingkungan</option>
                        <option value="lainnya">Lainnya</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Tanggal Kejadian</label>
                        <input type="date" class="form-input" id="k3Date">
                    </div>
                    <div class="form-group">
                        <label class="form-label required">Waktu Kejadian</label>
                        <input type="time" class="form-input" id="k3Time">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label required">Lokasi Spesifik</label>
                    <input type="text" class="form-input" id="k3Location" placeholder="Contoh: Labkom SMP lantai 2, dekat jendela sebelah utara">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Nama Pelapor</label>
                        <input type="text" class="form-input" id="k3Reporter" placeholder="Nama lengkap pelapor">
                    </div>
                    <div class="form-group">
                        <label class="form-label required">No. HP</label>
                        <input type="tel" class="form-input" id="k3Phone" placeholder="08xxxxxxxxxx">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label required">Unit/Jabatan</label>
                    <select class="form-select" id="k3Unit">
                        <option value="">-- Pilih Unit --</option>
                        <option value="guru">Guru</option>
                        <option value="siswa">Siswa</option>
                        <option value="staf_admin">Staf Administrasi</option>
                        <option value="kebersihan">Petugas Kebersihan</option>
                        <option value="sekuriti">Petugas Keamanan</option>
                        <option value="teknisi">Teknisi/Maintenance</option>
                        <option value="tamu">Tamu/Visitor</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label required">Severity Level</label>
                    <select class="form-select" id="k3Severity">
                        <option value="">-- Pilih Tingkat Keparahan --</option>
                        <option value="rendah">Rendah (Tidak ada korban)</option>
                        <option value="sedang">Sedang (Korban minor/cedera ringan)</option>
                        <option value="tinggi">Tinggi (Korban cedera serius)</option>
                        <option value="kritis">Kritis (Korban jiwa/evakuasi)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label required">Deskripsi Lengkap Insiden</label>
                    <textarea class="form-input form-textarea" id="k3Description" placeholder="Jelaskan kronologi kejadian secara detail:
‚Ä¢ Apa yang terjadi
‚Ä¢ Penyebab (jika diketahui)
‚Ä¢ Kondisi saat ditemukan
‚Ä¢ Orang yang terlibat
‚Ä¢ Kerusakan/peralatan yang terdampak"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label required">Tindakan Darurat yang Dilakukan</label>
                    <textarea class="form-input form-textarea" id="k3Action" placeholder="Tindakan yang sudah dilakukan:
‚Ä¢ Evakuasi
‚Ä¢ Pertolongan pertama
‚Ä¢ Pelaporan
‚Ä¢ Pengamanan area"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label required">Upload Foto Bukti</label>
                    <input type="file" class="form-input" id="k3Photo" accept="image/*" capture="environment">
                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">
                        üì∏ Foto wajib sebagai bukti dokumentasi
                    </div>
                </div>

                <div style="background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                    <div style="color: var(--accent-red); font-weight: 700; margin-bottom: 10px;">üö® PROTOCOL DARURAT:</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.4;">
                        1. Jika ada korban, segera hubungi 118/119<br>
                        2. Amankan area dari bahaya lanjutan<br>
                        3. Jangan sentuh bukti sebelum investigasi<br>
                        4. Laporkan ke atasan langsung<br>
                        5. Tunggu instruksi dari tim K3
                    </div>
                </div>
            </div>

            <button class="btn btn-danger" onclick="submitK3Report()">
                üö® LAPORKAN INSIDEN
            </button>
        </div>
    </div>

    <!-- SECURITY FORM MODAL -->
    <div id="securityModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üíÇ FORM LAPORAN SEKURITI</div>
                <button class="modal-close" onclick="closeModal('securityModal')">√ó</button>
            </div>

            <div style="max-height: 60vh; overflow-y: auto; padding-right: 10px;">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Nama Petugas</label>
                        <input type="text" class="form-input" id="securityOfficer" placeholder="Nama lengkap petugas">
                    </div>
                    <div class="form-group">
                        <label class="form-label required">ID Petugas</label>
                        <input type="text" class="form-input" id="securityID" placeholder="Nomor identitas">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Shift</label>
                        <select class="form-select" id="securityShift">
                            <option value="">-- Pilih Shift --</option>
                            <option value="pagi">Pagi (06:00 - 14:00)</option>
                            <option value="siang">Siang (14:00 - 22:00)</option>
                            <option value="malam">Malam (22:00 - 06:00)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label required">Tanggal Patroli</label>
                        <input type="date" class="form-input" id="securityDate">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label required">Jenis Laporan</label>
                    <select class="form-select" id="securityReportType">
                        <option value="">-- Pilih Jenis Laporan --</option>
                        <option value="patroli_rutin">Patroli Rutin</option>
                        <option value="check_point">Check Point Reporting</option>
                        <option value="insiden">Insiden Keamanan</option>
                        <option value="orang_asing">Orang Asing Mencurigakan</option>
                        <option value="kendaraan">Kendaraan Mencurigakan</option>
                        <option value="pencurian">Pencurian/Penjarahan</option>
                        <option value="vandalisme">Vandalisme</option>
                        <option value="pemadaman">Pemadaman Listrik</option>
                        <option value="bencana">Bencana Alam</option>
                        <option value="lainnya">Lainnya</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label required">Lokasi Patroli/Insiden</label>
                    <select class="form-select" id="securityLocation">
                        <option value="">-- Pilih Lokasi --</option>
                        <option value="gerbang_utama">Gerbang Utama</option>
                        <option value="gerbang_belakang">Gerbang Belakang</option>
                        <option value="parkir_utama">Area Parkir Utama</option>
                        <option value="parkir_guru">Parkir Guru</option>
                        <option value="gedung_sd">Gedung SD</option>
                        <option value="gedung_smp">Gedung SMP</option>
                        <option value="gedung_sma">Gedung SMA</option>
                        <option value="laboratorium">Area Laboratorium</option>
                        <option value="perpustakaan">Perpustakaan</option>
                        <option value="kantin">Kantin & Kafetaria</option>
                        <option value="lapangan_olahraga">Lapangan Olahraga</option>
                        <option value="taman">Area Taman</option>
                        <option value="seluruh_area">Patroli Seluruh Area</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label required">Status Keamanan</label>
                    <select class="form-select" id="securityStatus">
                        <option value="">-- Pilih Status --</option>
                        <option value="aman">Aman (Normal)</option>
                        <option value="waspada">Waspada (Ada Potensi)</option>
                        <option value="siaga">Siaga (Insiden Minor)</option>
                        <option value="darurat">Darurat (Butuh Bantuan)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label required">Detail Temuan/Insiden</label>
                    <textarea class="form-input form-textarea" id="securityFindings" placeholder="Deskripsikan temuan patroli:
‚Ä¢ Aktivitas yang tidak biasa
‚Ä¢ Orang/kendaraan mencurigakan
‚Ä¢ Kerusakan fasilitas
‚Ä¢ Pelanggaran peraturan
‚Ä¢ Kondisi lingkungan"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label required">Tindakan yang Dilakukan</label>
                    <textarea class="form-input form-textarea" id="securityAction" placeholder="Tindakan yang sudah dilakukan:
‚Ä¢ Peringatan lisan
‚Ä¢ Penanganan insiden
‚Ä¢ Pelaporan atasan
‚Ä¢ Koordinasi dengan pihak terkait"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Foto Dokumentasi (Opsional)</label>
                    <input type="file" class="form-input" id="securityPhoto" accept="image/*">
                </div>

                <div class="form-group">
                    <label class="form-label">Catatan Khusus</label>
                    <textarea class="form-input form-textarea" id="securityNotes" placeholder="Catatan tambahan, saran, atau rekomendasi..."></textarea>
                </div>

                <div style="background: rgba(245, 158, 11, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                    <div style="color: var(--accent-gold); font-weight: 700; margin-bottom: 10px;">üìã PROTOCOL PATROLI:</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.4;">
                        1. Patroli rutin setiap 2 jam<br>
                        2. Check point wajib di 5 lokasi utama<br>
                        3. Laporkan insiden dalam 15 menit<br>
                        4. Gunakan alat komunikasi yang disediakan<br>
                        5. Koordinasi dengan petugas shift berikutnya
                    </div>
                </div>
            </div>

            <button class="btn btn-warning" onclick="submitSecurityReport()">
                üìã SUBMIT LAPORAN
            </button>
        </div>
    </div>

    <!-- BATTERY MODAL -->
    <div id="batteryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üîã OPTIMASI BATERAI</div>
                <button class="modal-close" onclick="closeModal('batteryModal')">√ó</button>
            </div>

            <div class="form-group">
                <label class="form-label">Status Baterai</label>
                <div style="background: var(--bg-secondary); padding: 15px; border-radius: 10px; margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Level Baterai:</span>
                        <span id="batteryLevel">--%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Status Charging:</span>
                        <span id="chargingStatus">--</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Estimasi Waktu:</span>
                        <span id="batteryTime">--</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Pengaturan Hemat Daya</label>
                <div style="background: var(--bg-secondary); padding: 15px; border-radius: 10px;">
                    <label style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span>Mode Gelap Otomatis</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoDarkMode" checked>
                            <span class="slider"></span>
                        </label>
                    </label>
                    <label style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span>Reduksi Animasi</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="reduceAnimations">
                            <span class="slider"></span>
                        </label>
                    </label>
                    <label style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Auto-Sleep Mode</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoSleep" checked>
                            <span class="slider"></span>
                        </label>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Tips Hemat Baterai</label>
                <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px;">
                    <div style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5;">
                        ‚Ä¢ Gunakan mode gelap saat baterai < 30%<br>
                        ‚Ä¢ Kurangi kecerahan layar<br>
                        ‚Ä¢ Matikan fitur yang tidak digunakan<br>
                        ‚Ä¢ Tutup aplikasi latar belakang<br>
                        ‚Ä¢ Update sistem secara berkala
                    </div>
                </div>
            </div>

            <button class="btn btn-success" onclick="applyBatterySettings()">
                üíæ TERAPKAN PENGATURAN
            </button>
        </div>
    </div>

    <!-- ISO COMPLIANCE MODAL -->
    <div id="isoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üèÖ ISO 27001 COMPLIANCE</div>
                <button class="modal-close" onclick="closeModal('isoModal')">√ó</button>
            </div>

            <div class="form-group">
                <label class="form-label">Status Keamanan Sistem</label>
                <div style="background: var(--bg-secondary); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span>Encryption:</span>
                        <span style="color: var(--accent-green);">üü¢ AES-256</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span>Authentication:</span>
                        <span style="color: var(--accent-green);">üü¢ Multi-Factor</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span>Audit Trail:</span>
                        <span style="color: var(--accent-green);">üü¢ Active</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Data Backup:</span>
                        <span style="color: var(--accent-green);">üü¢ Daily</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Kontrol Keamanan</label>
                <div style="background: rgba(59, 130, 246, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5;">
                        ‚Ä¢ Access Control: Role-based permissions<br>
                        ‚Ä¢ Data Encryption: End-to-end encryption<br>
                        ‚Ä¢ Audit Logging: Complete activity tracking<br>
                        ‚Ä¢ Incident Response: 24/7 monitoring<br>
                        ‚Ä¢ Physical Security: Biometric access<br>
                        ‚Ä¢ Network Security: Firewall & VPN
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Compliance Checklist</label>
                <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px;">
                    <label style="display: flex; align-items: center; margin-bottom: 10px;">
                        <input type="checkbox" checked style="margin-right: 10px;"> Security Policy
                    </label>
                    <label style="display: flex; align-items: center; margin-bottom: 10px;">
                        <input type="checkbox" checked style="margin-right: 10px;"> Asset Management
                    </label>
                    <label style="display: flex; align-items: center; margin-bottom: 10px;">
                        <input type="checkbox" checked style="margin-right: 10px;"> Access Control
                    </label>
                    <label style="display: flex; align-items: center; margin-bottom: 10px;">
                        <input type="checkbox" checked style="margin-right: 10px;"> Cryptography
                    </label>
                    <label style="display: flex; align-items: center;">
                        <input type="checkbox" checked style="margin-right: 10px;"> Incident Management
                    </label>
                </div>
            </div>

            <button class="btn btn-primary" onclick="runSecurityScan()">
                üîç RUN SECURITY SCAN
            </button>
        </div>
    </div>

    <!-- SESSION MODAL -->
    <div id="sessionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">‚è±Ô∏è PENGATURAN SESSION</div>
                <button class="modal-close" onclick="closeModal('sessionModal')">√ó</button>
            </div>

            <div class="form-group">
                <label class="form-label">Session Timeout</label>
                <select class="form-select" id="sessionTimeout">
                    <option value="15">15 menit</option>
                    <option value="30" selected>30 menit</option>
                    <option value="60">60 menit</option>
                    <option value="120">2 jam</option>
                    <option value="0">Tidak pernah (tidak disarankan)</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Auto-Lockout Setting</label>
                <select class="form-select" id="autoLockout">
                    <option value="3">3 percobaan gagal</option>
                    <option value="5" selected>5 percobaan gagal</option>
                    <option value="10">10 percobaan gagal</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Lockout Duration</label>
                <select class="form-select" id="lockoutDuration">
                    <option value="5">5 menit</option>
                    <option value="15" selected>15 menit</option>
                    <option value="30">30 menit</option>
                    <option value="60">1 jam</option>
                </select>
            </div>

            <div style="background: rgba(251, 191, 36, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                <div style="color: var(--accent-gold); font-weight: 700; margin-bottom: 10px;">üîê KEAMANAN SESSION:</div>
                <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.4;">
                    ‚Ä¢ Session akan otomatis logout setelah timeout<br>
                    ‚Ä¢ Auto-lockout mencegah brute force attack<br>
                    ‚Ä¢ Semua aktivitas tercatat di audit log<br>
                    ‚Ä¢ Session dienkripsi dengan AES-256
                </div>
            </div>

            <button class="btn btn-success" onclick="saveSessionSettings()">
                üíæ SIMPAN PENGATURAN
            </button>
        </div>
    </div>

    <!-- LOGIN MODAL -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üîê SYSTEM LOGIN</div>
                <button class="modal-close" onclick="closeModal('loginModal')">√ó</button>
            </div>

            <div class="form-group">
                <label class="form-label">Pilih Role</label>
                <select class="form-select" id="loginRole">
                    <option value="user">User/Guru</option>
                    <option value="security">Security/Petugas</option>
                    <option value="admin">Admin</option>
                    <option value="inventory">Inventory Manager</option>
                    <option value="warehouse">Warehouse Manager</option>
                    <option value="architect">Architect (418626)</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Password</label>
                <div style="position: relative;">
                    <input type="password" class="form-input" id="loginPassword" placeholder="Masukkan password">
                    <button onclick="togglePassword('loginPassword')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: var(--text-secondary);">üëÅÔ∏è</button>
                </div>
            </div>

            <div style="background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                <div style="color: var(--accent-red); font-weight: 700; margin-bottom: 10px;">‚ö†Ô∏è PERINGATAN KEAMANAN:</div>
                <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.4;">
                    ‚Ä¢ Password salah 5x akan lockout sistem<br>
                    ‚Ä¢ Session timeout 30 menit<br>
                    ‚Ä¢ Audit log mencatat semua aktivitas<br>
                    ‚Ä¢ ISO 27001 security protocol active
                </div>
            </div>

            <button class="btn btn-primary" onclick="processLogin()">
                üîì LOGIN KE SISTEM
            </button>
        </div>
    </div>

    <!-- ========== JAVASCRIPT ========== -->
    <script>
        // ========== SYSTEM CONFIGURATION ==========
        const DREAM_OS = {
            version: '19.0.20250111',
            currentUser: null,
            userRole: 'guest',
            theme: 'dark',
            sessionTimeout: 30, // minutes
            
            // Password configuration
            passwords: {
                user: 'user_@1234',
                security: 'security_pass',
                admin: '@dm1n_Sec2025',
                inventory: '4dm1n_6969@01',
                warehouse: '4dm1n_9696@02',
                architect: '418626'
            },
            
            // ========== INITIALIZATION ==========
            init() {
                console.log('üöÄ DREAM OS v19.0 Initializing...');
                
                // Hide loader after 1 second
                setTimeout(() => {
                    document.getElementById('loader').classList.add('hidden');
                }, 1000);
                
                // Setup real-time features
                this.setupClock();
                this.setupBattery();
                this.setupNetwork();
                this.setupStorage();
                this.loadSettings();
                
                // Setup ghost mode
                this.setupGhostMode();
                
                console.log('‚úÖ DREAM OS Ready');
            },
            
            // ========== VIEW MANAGEMENT ==========
            showView(viewId) {
                // Hide all views
                document.querySelectorAll('.view').forEach(view => {
                    view.classList.remove('active');
                });
                
                // Show selected view
                const view = document.getElementById(viewId + 'View');
                if (view) {
                    view.classList.add('active');
                }
                
                // Update bottom nav
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                const navItems = document.querySelectorAll('.nav-item');
                const viewMap = {
                    'home': 0,
                    'booking': 1,
                    'k3': 2,
                    'security': 3,
                    'settings': 4
                };
                
                if (viewMap[viewId] !== undefined) {
                    navItems[viewMap[viewId]].classList.add('active');
                }
            },
            
            // ========== FORM DISPLAY ==========
            showBookingForm() {
                this.showModal('bookingModal');
                // Set default date to tomorrow
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                document.getElementById('bookingDate').value = tomorrow.toISOString().split('T')[0];
            },
            
            showK3Form() {
                this.showModal('k3Modal');
                // Set current date and time
                const now = new Date();
                document.getElementById('k3Date').value = now.toISOString().split('T')[0];
                document.getElementById('k3Time').value = now.toTimeString().substring(0, 5);
            },
            
            showSecurityForm() {
                this.showModal('securityModal');
                // Set current date
                const today = new Date();
                document.getElementById('securityDate').value = today.toISOString().split('T')[0];
            },
            
            // ========== FORM SUBMISSION ==========
            submitBooking() {
                const data = {
                    sarana: document.getElementById('bookingSarana').value,
                    name: document.getElementById('bookingName').value,
                    unit: document.getElementById('bookingUnit').value,
                    phone: document.getElementById('bookingPhone').value,
                    date: document.getElementById('bookingDate').value,
                    start: document.getElementById('bookingStart').value,
                    end: document.getElementById('bookingEnd').value,
                    participants: document.getElementById('bookingParticipants').value,
                    eventType: document.getElementById('bookingEventType').value,
                    notes: document.getElementById('bookingNotes').value,
                    timestamp: new Date().toISOString(),
                    status: 'pending'
                };
                
                if (!this.validateForm(data, ['sarana', 'name', 'unit', 'phone', 'date', 'start', 'end'])) {
                    this.showToast('‚ùå Harap isi semua field yang wajib', 'error');
                    return;
                }
                
                // Save to localStorage
                this.saveData('bookings', data);
                
                // Show success message
                this.showToast('‚úÖ Booking berhasil dikirim! Menunggu approval.');
                
                // Close modal
                this.closeModal('bookingModal');
                
                // Update stats
                this.updateStats();
            },
            
            submitK3Report() {
                const data = {
                    type: document.getElementById('k3IncidentType').value,
                    date: document.getElementById('k3Date').value,
                    time: document.getElementById('k3Time').value,
                    location: document.getElementById('k3Location').value,
                    reporter: document.getElementById('k3Reporter').value,
                    phone: document.getElementById('k3Phone').value,
                    unit: document.getElementById('k3Unit').value,
                    severity: document.getElementById('k3Severity').value,
                    description: document.getElementById('k3Description').value,
                    action: document.getElementById('k3Action').value,
                    timestamp: new Date().toISOString(),
                    status: 'reported'
                };
                
                if (!this.validateForm(data, ['type', 'date', 'time', 'location', 'reporter', 'phone', 'unit', 'severity'])) {
                    this.showToast('‚ùå Harap isi semua field yang wajib', 'error');
                    return;
                }
                
                // Save to localStorage
                this.saveData('k3_reports', data);
                
                // Show success message
                this.showToast('üö® Laporan K3 telah dikirim!');
                
                // Close modal
                this.closeModal('k3Modal');
                
                // Update stats
                this.updateStats();
            },
            
            submitSecurityReport() {
                const data = {
                    officer: document.getElementById('securityOfficer').value,
                    id: document.getElementById('securityID').value,
                    shift: document.getElementById('securityShift').value,
                    date: document.getElementById('securityDate').value,
                    type: document.getElementById('securityReportType').value,
                    location: document.getElementById('securityLocation').value,
                    status: document.getElementById('securityStatus').value,
                    findings: document.getElementById('securityFindings').value,
                    action: document.getElementById('securityAction').value,
                    notes: document.getElementById('securityNotes').value,
                    timestamp: new Date().toISOString()
                };
                
                if (!this.validateForm(data, ['officer', 'shift', 'date', 'type', 'location', 'status'])) {
                    this.showToast('‚ùå Harap isi semua field yang wajib', 'error');
                    return;
                }
                
                // Save to localStorage
                this.saveData('security_reports', data);
                
                // Show success message
                this.showToast('üìã Laporan keamanan telah disimpan!');
                
                // Close modal
                this.closeModal('securityModal');
                
                // Update stats
                this.updateStats();
            },
            
            // ========== SETTINGS MANAGEMENT ==========
            toggleTheme() {
                const body = document.body;
                const themeStatus = document.getElementById('themeStatus');
                
                if (this.theme === 'dark') {
                    this.theme = 'light';
                    body.setAttribute('data-theme', 'light');
                    themeStatus.textContent = 'Terang';
                    this.showToast('‚òÄÔ∏è Mode terang diaktifkan');
                } else {
                    this.theme = 'dark';
                    body.setAttribute('data-theme', 'dark');
                    themeStatus.textContent = 'Gelap';
                    this.showToast('üåô Mode gelap diaktifkan');
                }
                
                // Save to localStorage
                localStorage.setItem('dreamos_theme', this.theme);
            },
            
            clearCache() {
                if (confirm('Apakah Anda yakin ingin menghapus semua cache?\nIni akan menghapus data sementara tetapi tidak menghapus laporan.')) {
                    // Clear non-essential data
                    const essentialKeys = ['dreamos_bookings', 'dreamos_k3_reports', 'dreamos_security_reports'];
                    
                    for (let i = 0; i < localStorage.length; i++) {
                        const key = localStorage.key(i);
                        if (!essentialKeys.includes(key)) {
                            localStorage.removeItem(key);
                        }
                    }
                    
                    this.showToast('üßπ Cache berhasil dibersihkan!');
                }
            },
            
            applyBatterySettings() {
                const autoDark = document.getElementById('autoDarkMode').checked;
                const reduceAnimations = document.getElementById('reduceAnimations').checked;
                const autoSleep = document.getElementById('autoSleep').checked;
                
                // Save settings
                const settings = {
                    batteryAutoDark: autoDark,
                    batteryReduceAnimations: reduceAnimations,
                    batteryAutoSleep: autoSleep
                };
                
                localStorage.setItem('dreamos_battery_settings', JSON.stringify(settings));
                
                this.showToast('üîã Pengaturan baterai diterapkan!');
                this.closeModal('batteryModal');
            },
            
            saveSessionSettings() {
                const timeout = document.getElementById('sessionTimeout').value;
                const lockout = document.getElementById('autoLockout').value;
                const duration = document.getElementById('lockoutDuration').value;
                
                // Update session settings
                this.sessionTimeout = parseInt(timeout);
                
                const settings = {
                    sessionTimeout: timeout,
                    autoLockout: lockout,
                    lockoutDuration: duration
                };
                
                localStorage.setItem('dreamos_session_settings', JSON.stringify(settings));
                
                this.showToast('‚è±Ô∏è Pengaturan session disimpan!');
                this.closeModal('sessionModal');
            },
            
            runSecurityScan() {
                this.showToast('üîç Security scan dimulai...', 'info');
                
                setTimeout(() => {
                    this.showToast('‚úÖ Security scan selesai: Semua sistem aman', 'success');
                }, 2000);
            },
            
            // ========== LOGIN SYSTEM ==========
            showLogin() {
                this.showModal('loginModal');
            },
            
            processLogin() {
                const role = document.getElementById('loginRole').value;
                const password = document.getElementById('loginPassword').value;
                
                if (this.passwords[role] && password === this.passwords[role]) {
                    this.userRole = role;
                    this.currentUser = role;
                    
                    this.showToast(`‚úÖ Login berhasil sebagai ${role}`);
                    this.closeModal('loginModal');
                    
                    // Enable features based on role
                    this.enableRoleFeatures(role);
                } else {
                    this.showToast('‚ùå Password salah!', 'error');
                }
            },
            
            enableRoleFeatures(role) {
                // Enable features based on role
                const features = {
                    architect: ['ghost_mode', 'system_diagnostics', 'remote_access'],
                    admin: ['approvals', 'reports', 'user_management'],
                    security: ['patrol_logs', 'incident_reports'],
                    user: ['booking', 'k3_reports']
                };
                
                console.log(`üîì Features enabled for ${role}:`, features[role] || []);
            },
            
            // ========== UTILITY FUNCTIONS ==========
            showModal(modalId) {
                document.getElementById(modalId).style.display = 'flex';
            },
            
            closeModal(modalId) {
                document.getElementById(modalId).style.display = 'none';
            },
            
            togglePassword(inputId) {
                const input = document.getElementById(inputId);
                if (input.type === 'password') {
                    input.type = 'text';
                } else {
                    input.type = 'password';
                }
            },
            
            showToast(message, type = 'info') {
                // Create toast element
                const toast = document.createElement('div');
                toast.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: ${type === 'error' ? 'var(--accent-red)' : 
                                 type === 'success' ? 'var(--accent-green)' : 'var(--accent-blue)'};
                    color: white;
                    padding: 12px 24px;
                    border-radius: 10px;
                    font-weight: 700;
                    z-index: 3000;
                    box-shadow: var(--shadow-card);
                    animation: slideIn 0.3s ease;
                `;
                toast.textContent = message;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            },
            
            validateForm(data, requiredFields) {
                for (const field of requiredFields) {
                    if (!data[field] || data[field].trim() === '') {
                        return false;
                    }
                }
                return true;
            },
            
            saveData(key, data) {
                const stored = JSON.parse(localStorage.getItem(`dreamos_${key}`) || '[]');
                stored.push(data);
                localStorage.setItem(`dreamos_${key}`, JSON.stringify(stored));
            },
            
            updateStats() {
                // Update today's bookings count
                const today = new Date().toISOString().split('T')[0];
                const bookings = JSON.parse(localStorage.getItem('dreamos_bookings') || '[]');
                const todayBookings = bookings.filter(b => b.date === today).length;
                
                document.getElementById('todayBookings').textContent = todayBookings;
            },
            
            // ========== SYSTEM MONITORS ==========
            setupClock() {
                const updateClock = () => {
                    const now = new Date();
                    const time = now.toLocaleTimeString('id-ID', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        second: '2-digit'
                    });
                    document.getElementById('currentTime').textContent = time;
                };
                
                updateClock();
                setInterval(updateClock, 1000);
            },
            
            setupBattery() {
                if ('getBattery' in navigator) {
                    navigator.getBattery().then(battery => {
                        const updateBattery = () => {
                            const percent = Math.round(battery.level * 100);
                            const charging = battery.charging ? 'Charging' : 'Not Charging';
                            
                            document.getElementById('batteryStatus').textContent = `üîã ${percent}%`;
                            document.getElementById('batteryLevel').textContent = `${percent}%`;
                            document.getElementById('chargingStatus').textContent = charging;
                            
                            // Estimate time remaining
                            if (battery.charging) {
                                document.getElementById('batteryTime').textContent = 'Charging...';
                            } else {
                                const hours = Math.floor(battery.dischargingTime / 3600);
                                const minutes = Math.floor((battery.dischargingTime % 3600) / 60);
                                document.getElementById('batteryTime').textContent = `${hours}h ${minutes}m`;
                            }
                            
                            // Update color based on battery level
                            const batteryEl = document.getElementById('batteryStatus');
                            if (percent < 20) {
                                batteryEl.style.color = 'var(--accent-red)';
                            } else if (percent < 50) {
                                batteryEl.style.color = 'var(--accent-gold)';
                            } else {
                                batteryEl.style.color = 'var(--accent-green)';
                            }
                        };
                        
                        updateBattery();
                        battery.addEventListener('levelchange', updateBattery);
                        battery.addEventListener('chargingchange', updateBattery);
                    });
                }
            },
            
            setupNetwork() {
                const updateNetwork = () => {
                    const status = navigator.onLine ? 'Online' : 'Offline';
                    const color = navigator.onLine ? 'var(--accent-green)' : 'var(--accent-red)';
                    
                    document.getElementById('connectionStatus').textContent = status;
                    document.getElementById('connectionStatus').style.color = color;
                };
                
                updateNetwork();
                window.addEventListener('online', updateNetwork);
                window.addEventListener('offline', updateNetwork);
            },
            
            setupStorage() {
                if ('storage' in navigator && 'estimate' in navigator.storage) {
                    navigator.storage.estimate().then(estimate => {
                        const usedMB = Math.round(estimate.usage / (1024 * 1024));
                        const quotaMB = Math.round(estimate.quota / (1024 * 1024));
                        const percent = Math.round((usedMB / quotaMB) * 100);
                        
                        document.getElementById('storageInfo').textContent = `${usedMB}MB/${quotaMB}MB (${percent}%)`;
                    });
                }
            },
            
            loadSettings() {
                // Load theme
                const savedTheme = localStorage.getItem('dreamos_theme');
                if (savedTheme) {
                    this.theme = savedTheme;
                    document.body.setAttribute('data-theme', savedTheme);
                    document.getElementById('themeStatus').textContent = 
                        savedTheme === 'light' ? 'Terang' : 'Gelap';
                }
                
                // Load session settings
                const sessionSettings = localStorage.getItem('dreamos_session_settings');
                if (sessionSettings) {
                    const settings = JSON.parse(sessionSettings);
                    this.sessionTimeout = parseInt(settings.sessionTimeout);
                }
                
                // Load battery settings
                const batterySettings = localStorage.getItem('dreamos_battery_settings');
                if (batterySettings) {
                    const settings = JSON.parse(batterySettings);
                    document.getElementById('autoDarkMode').checked = settings.batteryAutoDark;
                    document.getElementById('reduceAnimations').checked = settings.batteryReduceAnimations;
                    document.getElementById('autoSleep').checked = settings.batteryAutoSleep;
                }
            },
            
            // ========== GHOST MODE ==========
            setupGhostMode() {
                let codeBuffer = '';
                document.addEventListener('keydown', (e) => {
                    if (e.key >= '0' && e.key <= '9') {
                        codeBuffer += e.key;
                        if (codeBuffer.length > 6) {
                            codeBuffer = codeBuffer.substring(1);
                        }
                        
                        if (codeBuffer === '418626') {
                            this.activateGhostMode();
                            codeBuffer = '';
                        }
                    }
                });
            },
            
            activateGhostMode() {
                if (this.userRole !== 'architect') {
                    this.showToast('üîê Architect access required', 'error');
                    return;
                }
                
                const ghostConsole = `
                    <div style="position:fixed; top:0; left:0; width:100%; height:100%; background:#000; color:#0f0; font-family:monospace; padding:20px; z-index:9999;">
                        <h1>üëª GHOST CONSOLE v3.0</h1>
                        <div>> Architect Mode: ACTIVE</div>
                        <div>> User: ${this.userRole}</div>
                        <div>> Time: ${new Date().toISOString()}</div>
                        <div style="margin:20px 0; border:1px solid #0f0; padding:15px;">
                            <h3>SYSTEM COMMANDS</h3>
                            <div style="color:#0a0">‚Ä¢ system.diagnostics()</div>
                            <div style="color:#0a0">‚Ä¢ security.scan()</div>
                            <div style="color:#0a0">‚Ä¢ database.export()</div>
                            <div style="color:#0a0">‚Ä¢ remote.wipe()</div>
                        </div>
                        <button onclick="this.parentElement.remove()" style="background:#0f0; color:#000; padding:10px; border:none; cursor:pointer;">
                            EXIT GHOST MODE
                        </button>
                    </div>
                `;
                
                const div = document.createElement('div');
                div.innerHTML = ghostConsole;
                document.body.appendChild(div);
            },
            
            // ========== DATA EXPORT ==========
            exportData() {
                const data = {
                    bookings: JSON.parse(localStorage.getItem('dreamos_bookings') || '[]'),
                    k3_reports: JSON.parse(localStorage.getItem('dreamos_k3_reports') || '[]'),
                    security_reports: JSON.parse(localStorage.getItem('dreamos_security_reports') || '[]'),
                    export_date: new Date().toISOString()
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `dreamos_backup_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                
                this.showToast('üì§ Data berhasil diekspor!');
            }
        };

        // ========== GLOBAL FUNCTIONS ==========
        window.showView = (view) => DREAM_OS.showView(view);
        window.showBookingForm = () => DREAM_OS.showBookingForm();
        window.showK3Form = () => DREAM_OS.showK3Form();
        window.showSecurityForm = () => DREAM_OS.showSecurityForm();
        window.showLogin = () => DREAM_OS.showLogin();
        window.toggleTheme = () => DREAM_OS.toggleTheme();
        window.clearCache = () => DREAM_OS.clearCache();
        window.showModal = (modal) => DREAM_OS.showModal(modal);
        window.closeModal = (modal) => DREAM_OS.closeModal(modal);
        window.togglePassword = (inputId) => DREAM_OS.togglePassword(inputId);
        window.submitBooking = () => DREAM_OS.submitBooking();
        window.submitK3Report = () => DREAM_OS.submitK3Report();
        window.submitSecurityReport = () => DREAM_OS.submitSecurityReport();
        window.applyBatterySettings = () => DREAM_OS.applyBatterySettings();
        window.saveSessionSettings = () => DREAM_OS.saveSessionSettings();
        window.runSecurityScan = () => DREAM_OS.runSecurityScan();
        window.processLogin = () => DREAM_OS.processLogin();
        window.exportData = () => DREAM_OS.exportData();

        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', () => {
            DREAM_OS.init();
            DREAM_OS.updateStats();
        });
    </script>
</body>
</html>
